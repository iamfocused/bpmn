### 这套请假流程需要在EIM中维护的数据有
- 员工类型    
- 汇报给（直属领导）
- 直属SLT

### drools    
- input: 天数、人员类型
- output: 相关人员（人事，行政等） 是否需要SLT审批

### 数据库    
- 假期类型`DP_LEAVE_TYPE_`，注意`Name_`字段，确定好就不能修改，不然会影响流程
- 请假记录`DP_LEAVE_RECORDS_`
- 应享有假期`DP_HOLIDAY_BALANCE_`，如调休这样的享有假期目前是加班转换的（加班流程），因为年假目前所有人都一样，所以现在写死的，可不维护。以后如果每个人年休假不一样，需要维护在这张表中

### 修改点1:    
加班申请：    
	加班天数改成0.5-3的下拉框，添加一个“其他天数”（自定义天数）框    
	加班申请时间与实际加班时间不一致问题（待确定 目前可实现的是人工确定（如人事），如果是导入关联这种，加班申请是事后补的怎么办）    

请假流程：    
	请假材料都需要人事查看，并且人事有权力修改请假类型。    
	修改了请假类型要通知申请人    
	
### 2020-01-09    
附件修改为证明文件表述1    
部分请假类型证明文件**必填**、部分请假类型证明文件**不必填**、部分请假类型文件可**事后提供**    
邮件主题调整1    

加班流程：    
	备注改为加班理由1    
	加班天数，一个填写框，最小单位不是0.5无法提交1    
	
报表记录：详细请假加班记录	

请假剩余天数：    
	指定假期按照入职时间比例换算，上限是20天1    
	边界问题：7.30号请了5天年假，这5天有4天是下一学年的，这四天算是上学年休的还是下学年休的(还是说当前学年的假只能在当前学年休，加班怎么办？当前学年只能申请当前学年的加班能接受么？)     
	今年的请假、今年的加班，是针对审批通过时间？填写的开始时间？填写的结束时间？    
	关不关心以往享有的年假、往年剩余的年假
	
定时刷新（xxxx-8-1 00:00:00）涉及的地方：    
	- 两个函数：学年开始（cur_school_year_start_timestamp）、学年结束（cur_school_year_end_timestamp）     
	
## 处理    
### 加班流程    
- mail url, mail from to    
- metabaseUrl 获取上级领导      
### 请假流程    
- mail url, mail from to   
- call metabase get manager sn ,slt    
- drools 获取收件人的信息    
- drools 附件规则   
- 假期剩余天数metabase     


##   
需要：

IT方面：
1. 新增修改员工，IT收到邮件，邮件内容是一个域控导入附件。域控导入的csv模版，IT邮箱
    
请假加班： 
1. 所有人员名单 excel 导入（模版 我们提供）
(作用：a.审批的SLT和Manager在这里维护 b.维护的部门在采购中可用)
2. Excel，填写内容包括：人事、行政、运行行政副校长、排课负责人。
(作用：a.请假过程中需要接收邮件通知的人 b.流程有一个人事节点，哪些人事可以看到这个任务 也是在这里定义)

采购流程：    
1. 需要确认一份部门的数据，确认有哪些部门
(作用：a.根据部门去找部门预算负责人)
2. Excel 每个部门对应的部门预算负责人、行政校长
(作用：a.审批)
3. 目前看，采购涉及：申请人、部门预算负责人、行政校长、采购人。采购人相关的任务需要确定，是一个组里的人还是某个确定的人