<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.activiti.org/frm">
  <process id="DPPE001" name="入职流程" isExecutable="true" activiti:candidateStarterGroups="_dprzfq">
    <documentation>员工入职流程</documentation>
    <startEvent id="startevent1" name="Start" activiti:initiator="initiator">
      <extensionElements>
        <activiti:formProperty id="estimatedTimeOfEntry_预计入职时间 Estimated time of entry_1_string_t3_$$A" name="预计入职时间 Estimated time of entry" type="string" variable="estimatedTimeOfEntry" required="true"></activiti:formProperty>
        <activiti:formProperty id="companyEmail1_建议邮箱 Suggested mail_2_string_t1_$$A" name="建议邮箱 Suggested mail" type="string" variable="companyEmail1" required="true"></activiti:formProperty>
        <activiti:formProperty id="otherEmail1_建议备用邮箱 Suggested alternate mail_3_string_t1_$$A" name="建议备用邮箱 Suggested alternate mail" type="string" variable="otherEmail1"></activiti:formProperty>
        <activiti:formProperty id="contractPeriod_合同期限 Contract term (unit/year)_4_string_t11_$$A" name="合同期限（单位/年）Contract term (unit/year)" type="string" variable="contractPeriod" required="true"></activiti:formProperty>
        <activiti:formProperty id="trialPeriod_试用期时长 Duration of trial period (units/month)_5_string_t11_$$A" name="试用期时长（单位/月）Duration of trial period (units/month)" type="string" variable="trialPeriod" required="true"></activiti:formProperty>
        <activiti:formProperty id="name_姓名 Name_1_string_t1_$$B" name="姓名 Name" type="string" variable="name" required="true"></activiti:formProperty>
        <activiti:formProperty id="corp_实体 Legal entity_2_string_tree_$$B" name="法律实体 Legal entity" type="string" variable="legalCorp" required="true"></activiti:formProperty>
        <activiti:formProperty id="idNumber_身份证件号码 ID Number_3_string_t1_$$B" name="身份证件号码 ID Number" type="string" variable="idNumber" required="true"></activiti:formProperty>
        <activiti:formProperty id="employmentForms_用工形式 Employment forms_4_enum_sbs_$$B" name="用工形式 Employment forms" type="enum" variable="employmentForms" required="true">
          <activiti:value id="全职" name="全职 Full-time"></activiti:value>
          <activiti:value id="兼职" name="兼职 Part-time"></activiti:value>
          <activiti:value id="实习" name="实习 Internship"></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="rank_职级 Rank_5_enum_sbs_$$B" name="职级 Rank" type="enum" variable="rank" required="true">
          <activiti:value id="A" name="A"></activiti:value>
          <activiti:value id="B" name="B"></activiti:value>
          <activiti:value id="C" name="C"></activiti:value>
          <activiti:value id="D" name="D"></activiti:value>
          <activiti:value id="E" name="E"></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="reportTo_汇报对象 Reports to_1_string_psbi_$$C" name="汇报对象 Reports to" type="string" variable="reportTo" required="true"></activiti:formProperty>
        <activiti:formProperty id="inchargeOfTheApprover_分管审批人 Leaders in charge_2_string_psbi_$$C " name="分管审批人 Leaders in charge" type="string" variable="inchargeOfTheApprover" required="true"></activiti:formProperty>
        <activiti:formProperty id="department_部门 Department_3_string_tree_$$C" name="部门 Department" type="string" variable="department"></activiti:formProperty>
        <activiti:formProperty id="position_职位 Position_4_string_t1_$$C" name="职位 Position" type="string" variable="position" required="true"></activiti:formProperty>
        <activiti:formProperty id="dutyStation_工作地 Work place_1_string_t1_$$D" name="工作地 Work place" type="string" variable="dutyStation" required="true"></activiti:formProperty>
        <activiti:formProperty id="contactPhone_联系电话 Phone number_2_string_t1_$$D" name="联系电话 Phone number" type="string" variable="contactPhone" required="true"></activiti:formProperty>
        <activiti:formProperty id="basicMonthlySalary_基本月薪 Basic monthly salary_3_string_cny_$$D" name="基本月薪 Basic monthly salary" type="string" variable="basicMonthlySalary" required="true"></activiti:formProperty>
        <activiti:formProperty id="mealSubsidy_餐费补贴 Meal subsidy_4_string_cny_$$D" name="餐费补贴 Meal subsidy" type="string" variable="mealSubsidy" required="true"></activiti:formProperty>
        <activiti:formProperty id="annualPerformance_年度绩效 Annual performance_5_string_cny_$$D" name="年度绩效 Annual performance" type="string" variable="annualPerformance" required="true"></activiti:formProperty>
        <activiti:formProperty id="others_其他补充 Other supplements_6_string_t2_$$D" name="其他补充 Other supplements" type="string" variable="others" required="true"></activiti:formProperty>
        <activiti:formProperty id="otheraddressee_其他收件人 custom mail_1_string_t1_$$E" name="新增自定义邮件收件人(多个用逗号分开) Custom mail recipient (multiple use, split)" type="string" variable="otheraddressee"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_item" name="成本中心明细" type="string" variable="tbhdentryprocess_item" required="true"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_成本中心 Costcenter_costcenter_1_string_tree_$$A" name="成本中心 Cost Center" type="string" variable="tbhdentryprocess_costcenter_t00" required="true"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_项目 Project_project_2_string_tree_$$A" name="项目 Project" type="string" variable="tbhdentryprocess_project_t00" required="true"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_职能 Function_function_3_enum_sbs_$$A" name="职能 Function" type="enum" variable="tbhdentryprocess_fuction_t00" required="true">
          <activiti:value id="双语教师/中教" name="双语教师/中教 Bilingual/Chinese teacher"></activiti:value>
          <activiti:value id="外教" name="外教 Foreign teacher"></activiti:value>
          <activiti:value id="管理层/校长" name="管理层、校长 Management, principal"></activiti:value>
          <activiti:value id="咨询顾问/升学指导" name="咨询顾问/升学指导 Consultant/professional guidance"></activiti:value>
          <activiti:value id="服务人员" name="服务人员 Service staff"></activiti:value>
          <activiti:value id="市场人员" name="市场人员 Market staff"></activiti:value>
          <activiti:value id="研发人员" name="研发人员 R &amp; D staff"></activiti:value>
          <activiti:value id="后勤运营人员" name="后勤运营人员 Logistics operator"></activiti:value>
          <activiti:value id="销售人员" name="销售人员 Sales staff"></activiti:value>
          <activiti:value id="保育员" name="保育员 Nurse"></activiti:value>
          <activiti:value id="助教/教辅" name="助教/教辅 Teaching assistant"></activiti:value>
          <activiti:value id="教务" name="教务 Academic affairs"></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_比例 Proportion_proportion_4_string_t6_$$A" name="比例 Proportion" type="string" variable="tbhdentryprocess_proportion_t00" required="true"></activiti:formProperty>
        <activiti:formProperty id="offerattachment_附件_1_string_t9_$$F" name="CV和offer附件" type="string" variable="offerattachment"></activiti:formProperty>
        <activiti:executionListener event="end" class="org.activiti.engine.impl.bpmn.listener.ScriptExecutionListener">
          <activiti:field name="language">
            <activiti:string><![CDATA[groovy]]></activiti:string>
          </activiti:field>
          <activiti:field name="script">
            <activiti:string><![CDATA[import groovy.json.JsonSlurper;
				import groovy.json.JsonOutput;
				def jsonSlurper = new JsonSlurper()
				def ccs = jsonSlurper.parseText(tbhdentryprocess_item_std)
				def sum = ccs.sum {Double.parseDouble(it.proportion)}
				if (sum > 100) {
					throw new org.activiti.engine.ActivitiIllegalArgumentException('成本中心比例不能超过100 The cost center ratio cannot exceed 100');
				}
				
				def map = new HashMap()
				
				def corpName = jsonSlurper.parseText(legalCorp).get("name")
				def costCenters = ccs.stream().map() { it ->
				    def map1 = new HashMap(); map1.put("name", it.costcenter.name); map1.put("project", it.project.name); map1.put("function", it.function); map1.put("proportion", it.proportion); return map1;
				}.collect(java.util.stream.Collectors.toList())
				def department = jsonSlurper.parseText(department);
				
				def reportToSn = execution.getVariable("reportTo");
				def reportUserOpt = reportToSn != null ? Optional.ofNullable(identityService.createUserQuery().userId(reportToSn).singleResult()) : Optional.empty()
				def sb = new StringBuffer()
				reportUserOpt.map(){item -> sb.append(Optional.ofNullable(item.getLastName()).orElse("")).append(Optional.ofNullable(item.getFirstName()).orElse(""))}
				def reportTo = sb.toString()
				//保存汇报对象姓名
				execution.setVariable('reportToName', reportTo)
				
				def inChargeSn = execution.getVariable("inchargeOfTheApprover");
				def inChargeUserOpt = Optional.ofNullable(identityService.createUserQuery().userId(inChargeSn).singleResult())
				def sb1 = new StringBuffer()
				inChargeUserOpt.map(){item -> sb1.append(Optional.ofNullable(item.getLastName()).orElse("")).append(Optional.ofNullable(item.getFirstName()).orElse(""))}
				def inchargeOfTheApprover = sb1.toString()
				//保存分管审批人姓名
				execution.setVariable('inchargeOfTheApproverName',inchargeOfTheApprover)				
				
				def timeStamp = Long.parseLong(execution.getVariable("estimatedTimeOfEntry"))
				def date = java.time.format.DateTimeFormatter.ofPattern("yyyy-MM-dd").format(java.time.LocalDateTime.ofInstant(java.time.Instant.ofEpochMilli(timeStamp), java.time.ZoneId.systemDefault()))
				map.put("estimatedTimeOfEntry", date)
				map.put("name", name)
				map.put("position", position)
				map.put("corpName", corpName)
				map.put("department", department?.name)
				map.put("employmentForms", employmentForms)
				map.put("rank", rank)
				map.put("reportTo", reportTo)
				map.put("inchargeOfTheApprover", inchargeOfTheApprover)
				map.put("dutyStation", dutyStation)
				map.put("contactPhone", contactPhone)
				map.put("idNumber", idNumber)
				
				map.put("costCenter", costCenters)
				map.put("department", department?.name?:'')
				
				def baseMailJson = JsonOutput.toJson(map)
				execution.setVariable("baseMailJson", baseMailJson)
				
				map.put("basicMonthlySalary", basicMonthlySalary)
				map.put("mealSubsidy", mealSubsidy)
				map.put("annualPerformance", annualPerformance)
				map.put("others", others)
				
				def complateMailJson = JsonOutput.toJson(map)
				execution.setVariable("complateMailJson", complateMailJson)
				
				def otherMails = execution.getVariable('otheraddressee')
				if(otherMails && !otherMails.empty){
					def mails = otherMails?.split(",")
					mails.each {it-> 
						if(!it.matches("^\\s*\\w+(?:\\.{0,1}[\\w-]+)*@[a-zA-Z0-9]+(?:[-.][a-zA-Z0-9]+)*\\.[a-zA-Z]+\\s*\$")){
							throw new org.activiti.engine.ActivitiIllegalArgumentException("新增的自定义邮箱格式不正确 New custom mailbox format is incorrect")
						}						
					}
					execution.setVariable('personalMails',JsonOutput.toJson(mails))
				}
				//邮件地址
				def its = "it@dipont-edu.com"
				execution.setVariable('its', its)
				
				execution.setVariable('departmentName', department?.name?:'')
				
				def businessKey = execution.getBusinessKey()?:''
				def processProject = businessKey.length() > 6 ? businessKey.substring(6) : ''
				execution.setVariable('processProject', processProject)
				
				
				//common variable
				execution.setVariable('mailUrl', 'https://bpmcs.dipont.com/mail/v2/mail')
				execution.setVariable('mailFrom', 'notice@dipont.com')
				execution.setVariable('ncUrl', '')//
				execution.setVariable('buyUrl', 'https://bpmcs.dipont.com/decisiontables/v1/fire/buyer.xls')
				execution.setVariable('eimUrl', '//https://bpm.dipont.com/hr-dp-api/v2/employee/withoutauth')]]></activiti:string>
          </activiti:field>
        </activiti:executionListener>
      </extensionElements>
    </startEvent>
    <scriptTask id="scripttask1" name="获取相关通知人" scriptFormat="groovy" activiti:autoStoreVariables="false">
      <script>
    	import groovy.json.JsonSlurper
    		def jsonSlurper = new JsonSlurper()
    		def costCenterCode = jsonSlurper.parseText(tbhdentryprocess_item_std)[0].costcenter.code
    		def body = "[{\"costcenter\": \"$costCenterCode\"}]"
    		
    		def headerMap = new java.util.HashMap()
			headerMap.put("Content-Type","application/json")
			execution.setVariable("_http_method", "POST")
			execution.setVariable("_http_headers", headerMap)
			execution.setVariable("_http_body", body)
			execution.setVariable("_http_url", buyUrl)
			execution.setVariable("_http_response_body", '')
			execution.setVariable("_http_response_status_code", '')
    	
    	</script>
    </scriptTask>
    <serviceTask id="servicetask1" name="Service Task" activiti:class="com.eorionsolution.riying.bpms.javaservice.http.RestAPIService"></serviceTask>
    <scriptTask id="scripttask2" name="结果保存 &amp; 用人部门邮件构造" scriptFormat="groovy" activiti:autoStoreVariables="false">
      <script>
    	
			import groovy.json.JsonSlurper
			import groovy.json.JsonOutput
			
			def jsonSlurper = new JsonSlurper()
			if(!_http_response_status_code?.toString().startsWith('2')) {
				throw new org.activiti.engine.ActivitiIllegalArgumentException("Drools出错，请联系管理员 Drools error, please contact the administrator")
			}
			def response = jsonSlurper.parseText(_http_response_body)
			def allInfo = response[0]
			def adminMails = allInfo.buyer
			if(!adminMails) {
			    throw new org.activiti.engine.ActivitiIllegalArgumentException("当前成本中心的采购负责人未找到，请修正Drools文件 The current purchasing center of the cost center was not found, please correct the Drools file");
			}
			def fin = allInfo.fin
			if(!fin) {
			    throw new org.activiti.engine.ActivitiIllegalArgumentException("请在Drools中填写财务的邮箱 Please fill out the financial email address in Drools");
			}
			
			def otherAdmin = allInfo.otherAdmin
			
			if(!otherAdmin) {
			    throw new org.activiti.engine.ActivitiIllegalArgumentException("请在Drools中填写行政部门其他人邮箱 Please fill in the other person's mailbox in Drools");
			}
			
			def noticeMails = allInfo.notice
			
			if(!noticeMails) {
			    throw new org.activiti.engine.ActivitiIllegalArgumentException("请在Drools中填写邮箱开通邮件通知人的邮箱 Please fill in the email address of the email notification person in Drools");
			}
			
			def arriveMails = allInfo.arrive
			
			if(!arriveMails) {
			    throw new org.activiti.engine.ActivitiIllegalArgumentException("请在Drools中填写员工入职当前需要接受邮件的HR的邮箱 Please fill in the HR mailbox of the employee who is currently required to receive mail in Drools");
			}
			
			def admin1Mails = allInfo.admin1
			
			if(!admin1Mails) {
			    throw new org.activiti.engine.ActivitiIllegalArgumentException("请在Drools中填写流程启动后需要收到邮件的其他行政的邮箱 Please fill in the other administrative mailboxes that need to receive emails after the process starts in Drools");
			}
			
			def admins = adminMails.split(',')
			
			def admin1 = admin1Mails.split(',')
			execution.setVariable('admin1', JsonOutput.toJson(admin1))
			
			def arrive = arriveMails.split(',')
			execution.setVariable('arrive', JsonOutput.toJson(arrive))
			
			def notice = noticeMails.split(',')
			execution.setVariable('notice', JsonOutput.toJson(notice))
			
			def purchaseAdmins = new HashSet()
			def purchaseAdmins1 = otherAdmin.split(',')
			purchaseAdmins1.each{
			    purchaseAdmins.add(it)
			}
			admins.each {
			    purchaseAdmins.add(it)
			}
			execution.setVariable('purchaseAdmins', JsonOutput.toJson(purchaseAdmins))
			execution.setVariable('admins', JsonOutput.toJson(admins))
			execution.setVariable('admins_user', adminMails)
			execution.setVariable('fins', fin.trim())
			//execution.setVariable('president', president.trim())
			
			//邮件发送用人部门
			def bodyMap = new HashMap()
			def detailMap = new HashMap()
			def dataMap = jsonSlurper.parseText(complateMailJson)
			dataMap.put("infoContent","1")//标记
			dataMap.put("trialPeriod",execution.getVariable("trialPeriod"))
			dataMap.put("contractPeriod",execution.getVariable("contractPeriod"))
			dataMap.put("companyEmail1",execution.getVariable("companyEmail1"))
			
			def to = new HashSet()
			to.add(execution.getVariable('reportTo'))
			to.add(execution.getVariable('inchargeOfTheApprover'))
			if(execution.getVariable('personalMails')){
				def personalMails = jsonSlurper.parseText(execution.getVariable('personalMails'))
				personalMails.each {to.add(it)}
			}
			
			detailMap.put("from", mailFrom)
			detailMap.put("to", to)
			detailMap.put("subject", "新员工入职通知-用人部门")
			detailMap.put("templateName", "entry-notification-all-template")
			detailMap.put("templateData",dataMap)
			bodyMap.put("mail", detailMap)
			def body = groovy.json.JsonOutput.toJson(bodyMap)
           	//send request
			execution.setVariable("_http_method", "POST")
			def headerMap = new HashMap()
			headerMap.put("Content-Type","application/json")
			execution.setVariable("_http_headers", headerMap)
			execution.setVariable("_http_body", body)
			execution.setVariable("departMailBody", body)
			execution.setVariable("_http_url", mailUrl)
			execution.setVariable("_http_response_body", '')
			execution.setVariable("_http_response_status_code", '')
    	
    	</script>
    </scriptTask>
    <serviceTask id="servicetask2" name="Service Task" activiti:class="com.eorionsolution.riying.bpms.javaservice.http.RestAPIService"></serviceTask>
    <scriptTask id="scripttask3" name="IT 行政邮件构造" scriptFormat="groovy" activiti:autoStoreVariables="false">
      <script>
    	
    		import groovy.json.JsonSlurper
			import groovy.json.JsonOutput
			
			def bodyMap = new HashMap()
			def detailMap = new HashMap()
			def jsonSlurper = new JsonSlurper()
			def dataMap = jsonSlurper.parseText(execution.getVariable("baseMailJson"))
			dataMap.put("infoContent","1")//标记
			dataMap.put("companyEmail1",execution.getVariable("companyEmail1"))
			
			
			def to = new HashSet()
			def cc = jsonSlurper.parseText(execution.getVariable('admin1'))
			to.add(execution.getVariable("its"))
			jsonSlurper.parseText(execution.getVariable("admins")).each{
				to.add(it)
			}
			cc.removeAll(to)
			
			detailMap.put("from", mailFrom)
			detailMap.put("to", to)
			detailMap.put('cc', cc)
			detailMap.put("subject", "新员工入职通知-IT 行政")
			detailMap.put("templateName", "entry-notification-all-template")
			detailMap.put("templateData",dataMap)
			bodyMap.put("mail", detailMap)
			def body = JsonOutput.toJson(bodyMap)
			execution.setVariable("_http_method", "POST")
			def headerMap = new HashMap()
			headerMap.put("Content-Type","application/json")
			execution.setVariable("_http_headers", headerMap)
			execution.setVariable("_http_body", body)
			execution.setVariable("itAdminMailBody", body)
			execution.setVariable("_http_url", mailUrl)
			execution.setVariable("_http_response_body", '')
			execution.setVariable("_http_response_status_code", '')
    	
    	</script>
    </scriptTask>
    <serviceTask id="servicetask3" name="Service Task" activiti:class="com.eorionsolution.riying.bpms.javaservice.http.RestAPIService"></serviceTask>
    <parallelGateway id="parallelgateway1" name="Parallel Gateway"></parallelGateway>
    <userTask id="usertask1" name="IT开邮箱任务" activiti:assignee="${its}">
      <extensionElements>
        <activiti:formProperty id="estimatedTimeOfEntry_预计入职时间 Estimated time of entry_1_string_t3_$$VA" name="预计入职时间 Estimated time of entry" type="string" variable="estimatedTimeOfEntry" required="true"></activiti:formProperty>
        <activiti:formProperty id="companyEmail1_建议邮箱 Suggested mail_2_string_t1_$$VA" name="建议邮箱 Suggested mail" type="string" variable="companyEmail1" required="true"></activiti:formProperty>
        <activiti:formProperty id="otherEmail1_建议备用邮箱 Suggested alternate mail_3_string_t1_$$VA" name="建议备用邮箱 Suggested alternate mail" type="string" variable="otherEmail1"></activiti:formProperty>
        <activiti:formProperty id="name_姓名 Name_1_string_t1_$$VB" name="姓名 Name" type="string" variable="name" required="true"></activiti:formProperty>
        <activiti:formProperty id="corp_实体 Legal entity_2_string_tree_$$VB" name="法律实体 Legal entity" type="string" variable="legalCorp" required="true"></activiti:formProperty>
        <activiti:formProperty id="idNumber_身份证件号码 ID Number_3_string_t1_$$VB" name="身份证件号码 ID Number" type="string" variable="idNumber" required="true"></activiti:formProperty>
        <activiti:formProperty id="employmentForms_用工形式 Employment forms_4_enum_sbs_$$VB" name="用工形式 Employment forms" type="string" variable="employmentForms" required="true"></activiti:formProperty>
        <activiti:formProperty id="rank_职级 Rank_5_enum_sbs_$$VB" name="职级 Rank" type="string" variable="rank" required="true"></activiti:formProperty>
        <activiti:formProperty id="reportTo_汇报对象 Reports to mail_1_string_psbi_$$VC" name="汇报对象邮箱 Reports to mail" type="string" variable="reportTo"></activiti:formProperty>
        <activiti:formProperty id="reportToName_汇报对象 Reports to_2_string_t1_$$VC" name="汇报对象 Reports to" type="string" variable="reportToName"></activiti:formProperty>
        <activiti:formProperty id="inchargeOfTheApprover_分管审批人 Leaders in charge mail_3_string_psbi_$$VC " name="分管审批人邮箱 Leaders in charge mail" type="string" variable="inchargeOfTheApprover" required="true"></activiti:formProperty>
        <activiti:formProperty id="inchargeOfTheApproverName_分管审批人 Leaders in charge_4_string_t1_$$VC " name="分管审批人 Leaders in charge" type="string" variable="inchargeOfTheApproverName"></activiti:formProperty>
        <activiti:formProperty id="department_部门 Department_5_string_tree_$$VC" name="部门 Department" type="string" variable="department"></activiti:formProperty>
        <activiti:formProperty id="position_职位 Position_6_string_t1_$$VC" name="职位 Position" type="string" variable="position" required="true"></activiti:formProperty>
        <activiti:formProperty id="dutyStation_工作地 Work place_1_string_t1_$$VD" name="工作地 Work place" type="string" variable="dutyStation" required="true"></activiti:formProperty>
        <activiti:formProperty id="contactPhone_联系电话 Phone number_2_string_t1_$$VD" name="联系电话 Phone number" type="string" variable="contactPhone" required="true"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_item_$$VA" name="成本中心明细" type="string" variable="tbhdentryprocess_item"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_成本中心 Costcenter_costcenter_1_string_tree_$$VA" name="成本中心 Cost Center" type="string" variable="tbhdentryprocess_costcenter_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_项目 Project_project_2_string_tree_$$VA" name="项目 Project" type="string" variable="tbhdentryprocess_project_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_职能 Function_function_3_enum_sbs_$$VA" name="职能 Function" type="string" variable="tbhdentryprocess_fuction_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_比例 Proportion_proportion_4_string_t6_$$VA" name="比例 Proportion" type="string" variable="tbhdentryprocess_proportion_t00"></activiti:formProperty>
        <activiti:formProperty id="sn_员工ID Domain account_1_string_t1_$$A" name="域账号 Domain account" type="string" variable="sn" required="true"></activiti:formProperty>
        <activiti:formProperty id="companyEmail_公司邮箱 Company email_2_string_t1_$$A" name="公司邮箱 Company email" type="string" variable="companyEmail" required="true"></activiti:formProperty>
        <activiti:formProperty id="otherEmail_备用邮箱 Backup email_3_string_t1_$$A" name="备用邮箱 Backup email" type="string" variable="otherEmail"></activiti:formProperty>
        <activiti:formProperty id="initpwd_初始密码 Initial password_4_string_t1_$$A" name="初始密码 Initial password" type="string" variable="initpwd" required="true"></activiti:formProperty>
        <activiti:executionListener event="end" class="org.activiti.engine.impl.bpmn.listener.ScriptExecutionListener">
          <activiti:field name="language">
            <activiti:string><![CDATA[groovy]]></activiti:string>
          </activiti:field>
          <activiti:field name="script">
            <activiti:string><![CDATA[import groovy.json.JsonSlurper;
				import groovy.json.JsonOutput;
				import java.util.*;
				
				def jsonSlurper = new JsonSlurper()
				def bodyMap = new HashMap()
				def detailMap = new HashMap()
				def dataMap = new HashMap()
				
				def to = new HashSet()
				jsonSlurper.parseText(execution.getVariable('admins')).each{
					to.add(it)
				}
				to.add(execution.getVariable('initiator'))
				def cc = jsonSlurper.parseText(execution.getVariable('notice'))
				
				detailMap.put("from", mailFrom)
				detailMap.put("to", to)
				detailMap.put("cc", cc)
				detailMap.put("subject", "邮箱开通提醒")
				detailMap.put("templateName", "entry-notification-all-template")
				detailMap.put("templateData",dataMap)
				dataMap.put("name", execution.getVariable("name"))
				dataMap.put("companyEmail", execution.getVariable("companyEmail"))
				dataMap.put("itMail", "1")//标记
				dataMap.put('processProject', execution.getVariable('processProject'))
				dataMap.put('initpwd', execution.getVariable('initpwd'))				
				
				bodyMap.put("mail", detailMap)
				def body = JsonOutput.toJson(bodyMap)
	           	//send request
				execution.setVariable("_http_method", "POST")
				def headerMap = new HashMap()
				headerMap.put("Content-Type","application/json")
				execution.setVariable("_http_headers", headerMap)
				execution.setVariable("_http_body", body)
				execution.setVariable("mailMailBody", body)
				execution.setVariable("_http_url", mailUrl)
				execution.setVariable("_http_response_body", '')
				execution.setVariable("_http_response_status_code", '')]]></activiti:string>
          </activiti:field>
        </activiti:executionListener>
        <activiti:executionListener event="start" class="org.activiti.engine.impl.bpmn.listener.ScriptExecutionListener">
          <activiti:field name="language">
            <activiti:string><![CDATA[groovy]]></activiti:string>
          </activiti:field>
          <activiti:field name="script">
            <activiti:string><![CDATA[execution.setVariable('companyEmail',execution.getVariable('companyEmail1'))
            	execution.setVariable('sn', execution.getVariable('companyEmail1'))
            	if(execution.getVariable('otherEmail1')){
            		execution.setVariable('otherEmail',execution.getVariable('otherEmail1'))
            	}]]></activiti:string>
          </activiti:field>
        </activiti:executionListener>
      </extensionElements>
    </userTask>
    <userTask id="usertask2" name="HR确认任务" activiti:assignee="${initiator}">
      <extensionElements>
        <activiti:formProperty id="estimatedTimeOfEntry_预计入职时间 Estimated time of entry_1_string_t3_$$VA" name="预计入职时间 Estimated time of entry" type="string" variable="estimatedTimeOfEntry" required="true"></activiti:formProperty>
        <activiti:formProperty id="contractPeriod_合同期限 Contract term (unit/year)_2_string_t11_$$VA" name="合同期限（单位/年）Contract term (unit/year)" type="string" variable="contractPeriod" required="true"></activiti:formProperty>
        <activiti:formProperty id="trialPeriod_试用期时长_3_string_t6_$$VA" name="试用期时长（单位/月）Duration of trial period (units/month)" type="string" variable="trialPeriod" required="true"></activiti:formProperty>
        <activiti:formProperty id="name_姓名 Name_1_string_t1_$$VB" name="姓名 Name" type="string" variable="name" required="true"></activiti:formProperty>
        <activiti:formProperty id="corp_实体 Legal entity_2_string_tree_$$VB" name="法律实体 Legal entity" type="string" variable="legalCorp" required="true"></activiti:formProperty>
        <activiti:formProperty id="idNumber_身份证件号码 ID Number_3_string_t1_$$VB" name="身份证件号码 ID Number" type="string" variable="idNumber" required="true"></activiti:formProperty>
        <activiti:formProperty id="employmentForms_用工形式 Employment forms_4_enum_sbs_$$VB" name="用工形式 Employment forms" type="string" variable="employmentForms" required="true"></activiti:formProperty>
        <activiti:formProperty id="rank_职级 Rank_5_enum_sbs_$$VB" name="职级 Rank" type="string" variable="rank" required="true"></activiti:formProperty>
        <activiti:formProperty id="reportTo_汇报对象 Reports to mail_1_string_psbi_$$VC" name="汇报对象邮箱 Reports to mail" type="string" variable="reportTo"></activiti:formProperty>
        <activiti:formProperty id="reportToName_汇报对象 Reports to_2_string_t1_$$VC" name="汇报对象 Reports to" type="string" variable="reportToName"></activiti:formProperty>
        <activiti:formProperty id="inchargeOfTheApprover_分管审批人 Leaders in charge mail_3_string_psbi_$$VC " name="分管审批人邮箱 Leaders in charge mail" type="string" variable="inchargeOfTheApprover" required="true"></activiti:formProperty>
        <activiti:formProperty id="inchargeOfTheApproverName_分管审批人 Leaders in charge_4_string_t1_$$VC " name="分管审批人 Leaders in charge" type="string" variable="inchargeOfTheApproverName"></activiti:formProperty>
        <activiti:formProperty id="department_部门 Department_5_string_tree_$$VC" name="部门 Department" type="string" variable="department"></activiti:formProperty>
        <activiti:formProperty id="position_职位 Position_6_string_t1_$$VC" name="职位 Position" type="string" variable="position" required="true"></activiti:formProperty>
        <activiti:formProperty id="dutyStation_工作地 Work place_1_string_t1_$$VD" name="工作地 Work place" type="string" variable="dutyStation" required="true"></activiti:formProperty>
        <activiti:formProperty id="contactPhone_联系电话 Phone number_2_string_t1_$$VD" name="联系电话 Phone number" type="string" variable="contactPhone" required="true"></activiti:formProperty>
        <activiti:formProperty id="basicMonthlySalary_基本月薪 Basic monthly salary_3_string_cny_$$VD" name="基本月薪 Basic monthly salary" type="string" variable="basicMonthlySalary" required="true"></activiti:formProperty>
        <activiti:formProperty id="mealSubsidy_餐费补贴 Meal subsidy_4_string_cny_$$VD" name="餐费补贴 Meal subsidy" type="string" variable="mealSubsidy" required="true"></activiti:formProperty>
        <activiti:formProperty id="annualPerformance_年度绩效 Annual performance_5_string_cny_$$VD" name="年度绩效 Annual performance" type="string" variable="annualPerformance" required="true"></activiti:formProperty>
        <activiti:formProperty id="others_其他补充 Other supplements_6_string_t2_$$VD" name="其他补充 Other supplements" type="string" variable="others" required="true"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_item_$$VA" name="成本中心明细" type="string" variable="tbhdentryprocess_item"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_成本中心 Costcenter_costcenter_1_string_tree_$$VA" name="成本中心 Cost Center" type="string" variable="tbhdentryprocess_costcenter_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_项目 Project_project_2_string_tree_$$VA" name="项目 Project" type="string" variable="tbhdentryprocess_project_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_职能 Function_function_3_enum_sbs_$$VA" name="职能 Function" type="string" variable="tbhdentryprocess_fuction_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_比例 Proportion_proportion_4_string_t6_$$VA" name="比例 Proportion" type="string" variable="tbhdentryprocess_proportion_t00"></activiti:formProperty>
        <activiti:formProperty id="offerattachment_附件_1_string_t9_$$VF" name="CV和offer附件" type="string" variable="offerattachment"></activiti:formProperty>
        <activiti:formProperty id="confirm_入职确认 Entry confirmation_1_enum_sbs_$$A" name="入职确认 Entry confirmation" type="enum" variable="confirm" required="true">
          <activiti:value id="Y" name="确认入职 Confirmation of employment"></activiti:value>
          <activiti:value id="N" name="拒绝入职 Refuse to join"></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="provideComputer_是否需要公司提供电脑 Need Computer_2_enum_sbs_$$A" name="是否需要公司提供电脑 Need Computer" type="enum" variable="provideComputer" required="true">
          <activiti:value id="Y" name="是 Yes"></activiti:value>
          <activiti:value id="N" name="否 No"></activiti:value>
        </activiti:formProperty>
      </extensionElements>
    </userTask>
    <exclusiveGateway id="exclusivegateway1" name="Exclusive Gateway"></exclusiveGateway>
    <scriptTask id="scripttask4" name="拒绝入职邮件构造" scriptFormat="groovy" activiti:autoStoreVariables="false">
      <script>
		
			import groovy.json.JsonSlurper;
			import groovy.json.JsonOutput;
			
			def jsonSlurper = new JsonSlurper()
			def bodyMap = new HashMap()
			def detailMap = new HashMap()
			def dataMap = new HashMap()
			
			def to = new HashSet()
			to.add(execution.getVariable('its'))
			jsonSlurper.parseText(execution.getVariable('admins')).each{
				to.add(it)
			}
			to.add(execution.getVariable('reportTo'))
			
			detailMap.put("from",mailFrom)
			detailMap.put("to", to)
			detailMap.put("subject", "取消入职")
			detailMap.put("templateName", "entry-notification-all-template")
			dataMap.put("name", execution.getVariable("name"))
			dataMap.put("cancelEntry", "1")//标记
			detailMap.put("templateData",dataMap)
			bodyMap.put("mail", detailMap)
			def body = groovy.json.JsonOutput.toJson(bodyMap)
           	//send request
			execution.setVariable("_http_method", "POST")
			def headerMap = new HashMap()
			headerMap.put("Content-Type","application/json")
			execution.setVariable("_http_headers", headerMap)
			execution.setVariable("_http_body", body)
			execution.setVariable("cancelMailBody", body)
			execution.setVariable("_http_url", mailUrl)
			execution.setVariable("_http_response_body", '')
			execution.setVariable("_http_response_status_code", '')
		
		</script>
    </scriptTask>
    <serviceTask id="servicetask4" name="Service Task" activiti:class="com.eorionsolution.riying.bpms.javaservice.http.RestAPIService"></serviceTask>
    <exclusiveGateway id="exclusivegateway2" name="Exclusive Gateway"></exclusiveGateway>
    <scriptTask id="scripttask5" name="采购通知邮件构造" scriptFormat="groovy" activiti:autoStoreVariables="false">
      <script>
    	
    			def jsonSlurper = new groovy.json.JsonSlurper()
    			
    			def bodyMap = new java.util.HashMap()
				def detailMap = new java.util.HashMap()
				def dataMap = jsonSlurper.parseText(execution.getVariable("baseMailJson"))
				dataMap.put("infoContent1","1")//标记
				//dataMap行政看的
				
				def to = new java.util.HashSet()
				jsonSlurper.parseText(admins).each{
					to.add(it)
				}
				to.add(its)
				
				detailMap.put("from", mailFrom)
				detailMap.put("to", to)
				detailMap.put("subject", "入职员工需要公司提供电脑")
				detailMap.put("templateName", "entry-notification-all-template")
				detailMap.put("templateData",dataMap)
				bodyMap.put("mail", detailMap)
				def body = groovy.json.JsonOutput.toJson(bodyMap)
					//send request
				execution.setVariable("_http_method", "POST")
				def headerMap = new HashMap()
				headerMap.put("Content-Type","application/json")
				execution.setVariable("_http_headers", headerMap)
				execution.setVariable("_http_body", body)
				execution.setVariable("adminMailBody", body)
				execution.setVariable("_http_url", mailUrl)
				execution.setVariable("_http_response_body", '')
				execution.setVariable("_http_response_status_code", '')
    	
    	</script>
    </scriptTask>
    <serviceTask id="servicetask5" name="Service Task" activiti:class="com.eorionsolution.riying.bpms.javaservice.http.RestAPIService"></serviceTask>
    <parallelGateway id="parallelgateway2" name="Parallel Gateway"></parallelGateway>
    <userTask id="usertask3" name="HR补充字段并录入EIM" activiti:assignee="${initiator}">
      <extensionElements>
        <activiti:formProperty id="sn_员工ID Domain account_1_string_t1_$$VA" name="域账号 Domain account" type="string" variable="sn" required="true"></activiti:formProperty>
        <activiti:formProperty id="companyEmail_公司邮箱 Company email_2_string_t1_$$VA" name="公司邮箱 Company email" type="string" variable="companyEmail" required="true"></activiti:formProperty>
        <activiti:formProperty id="estimatedTimeOfEntry_预计入职时间 Estimated time of entry_3_string_t3_$$VA" name="预计入职时间 Estimated time of entry" type="string" variable="estimatedTimeOfEntry" required="true"></activiti:formProperty>
        <activiti:formProperty id="contractPeriod_合同期限 Contract term (unit/year)_4_string_t11_$$VA" name="合同期限（单位/年）Contract term (unit/year)" type="string" variable="contractPeriod" required="true"></activiti:formProperty>
        <activiti:formProperty id="trialPeriod_试用期时长 Duration of trial period (units/month)_5_string_t11_$$VA" name="试用期时长（单位/月）Duration of trial period (units/month)" type="string" variable="trialPeriod" required="true"></activiti:formProperty>
        <activiti:formProperty id="name_姓名 Name_1_string_t1_$$VB" name="姓名 Name" type="string" variable="name" required="true"></activiti:formProperty>
        <activiti:formProperty id="corp_实体 Legal entity_2_string_tree_$$VB" name="法律实体 Legal entity" type="string" variable="legalCorp" required="true"></activiti:formProperty>
        <activiti:formProperty id="idNumber_身份证件号码 ID Number_3_string_t1_$$VB" name="身份证件号码 ID Number" type="string" variable="idNumber" required="true"></activiti:formProperty>
        <activiti:formProperty id="employmentForms_用工形式 Employment forms_4_enum_sbs_$$VB" name="用工形式 Employment forms" type="string" variable="employmentForms" required="true"></activiti:formProperty>
        <activiti:formProperty id="rank_职级 Rank_5_enum_sbs_$$VB" name="职级 Rank" type="string" variable="rank" required="true"></activiti:formProperty>
        <activiti:formProperty id="reportTo_汇报对象 Reports to mail_1_string_psbi_$$VC" name="汇报对象邮箱 Reports to mail" type="string" variable="reportTo"></activiti:formProperty>
        <activiti:formProperty id="reportToName_汇报对象 Reports to_2_string_t1_$$VC" name="汇报对象 Reports to" type="string" variable="reportToName"></activiti:formProperty>
        <activiti:formProperty id="inchargeOfTheApprover_分管审批人 Leaders in charge mail_3_string_psbi_$$VC " name="分管审批人邮箱 Leaders in charge mail" type="string" variable="inchargeOfTheApprover" required="true"></activiti:formProperty>
        <activiti:formProperty id="inchargeOfTheApproverName_分管审批人 Leaders in charge_4_string_t1_$$VC " name="分管审批人 Leaders in charge" type="string" variable="inchargeOfTheApproverName"></activiti:formProperty>
        <activiti:formProperty id="department_部门 Department_5_string_tree_$$VC" name="部门 Department" type="string" variable="department"></activiti:formProperty>
        <activiti:formProperty id="position_职位 Position_6_string_t1_$$VC" name="职位 Position" type="string" variable="position" required="true"></activiti:formProperty>
        <activiti:formProperty id="dutyStation_工作地 Work place_1_string_t1_$$VD" name="工作地 Work place" type="string" variable="dutyStation" required="true"></activiti:formProperty>
        <activiti:formProperty id="contactPhone_联系电话 Phone number_2_string_t1_$$VD" name="联系电话 Phone number" type="string" variable="contactPhone" required="true"></activiti:formProperty>
        <activiti:formProperty id="basicMonthlySalary_基本月薪 Basic monthly salary_3_string_cny_$$VD" name="基本月薪 Basic monthly salary" type="string" variable="basicMonthlySalary" required="true"></activiti:formProperty>
        <activiti:formProperty id="mealSubsidy_餐费补贴 Meal subsidy_4_string_cny_$$VD" name="餐费补贴 Meal subsidy" type="string" variable="mealSubsidy" required="true"></activiti:formProperty>
        <activiti:formProperty id="annualPerformance_年度绩效 Annual performance_5_string_cny_$$VD" name="年度绩效 Annual performance" type="string" variable="annualPerformance" required="true"></activiti:formProperty>
        <activiti:formProperty id="others_其他补充 Other supplements_6_string_t2_$$VD" name="其他补充 Other supplements" type="string" variable="others" required="true"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_item_$$VA" name="成本中心明细" type="string" variable="tbhdentryprocess_item"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_成本中心 Costcenter_costcenter_1_string_tree_$$VA" name="成本中心 Cost Center" type="string" variable="tbhdentryprocess_costcenter_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_项目 Project_project_2_string_tree_$$VA" name="项目 Project" type="string" variable="tbhdentryprocess_project_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_职能 Function_function_3_enum_sbs_$$VA" name="职能 Function" type="string" variable="tbhdentryprocess_fuction_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_比例 Proportion_proportion_4_string_t6_$$VA" name="比例 Proportion" type="string" variable="tbhdentryprocess_proportion_t00"></activiti:formProperty>
        <activiti:formProperty id="offerattachment_附件_1_string_t9_$$VF" name="CV和offer附件" type="string" variable="offerattachment"></activiti:formProperty>
        <activiti:formProperty id="actualEntryTime_实际入职时间 Actual entry time_1_string_t3_$$A" name="实际入职时间 Actual entry time" type="string" variable="actualEntryTime" required="true"></activiti:formProperty>
        <activiti:formProperty id="employeeId_员工工号 Employee number_2_string_t1_$$A" name="员工工号 Employee number" type="string" variable="employeeId" required="true"></activiti:formProperty>
        <activiti:formProperty id="idNumberValidityPeriodFrom_身份证件有效期 ID card is valid from_3_string_t3_$$A" name="身份证件有效期从 ID card is valid from" type="string" variable="idNumberValidityPeriodFrom" required="true"></activiti:formProperty>
        <activiti:formProperty id="idNumberValidityPeriodTo_身份证件有效期 ID card is valid until_4_string_t3_$$A" name="身份证件有效期至 ID card is valid until" type="string" variable="idNumberValidityPeriodTo" required="true"></activiti:formProperty>
        <activiti:formProperty id="sex_性别_5_enum_sbs_$$A" name="性别 Gender" type="enum" variable="sex" required="true">
          <activiti:value id="男" name="男 Male"></activiti:value>
          <activiti:value id="女" name="女 Female"></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="birthday_出生日期 Birthday_6_string_t3_$$A" name="生日 Birthday" type="string" variable="birthday" required="true"></activiti:formProperty>
        <activiti:formProperty id="citizenship_国籍 Country of Citizenship_1_string_t1_$$B" name="国籍 Country of Citizenship" type="string" variable="citizenship" required="true"></activiti:formProperty>
        <activiti:formProperty id="comeTime_进入集团日期 Entering the group date_2_string_t3_$$B" name="进入集团日期 Entering the group date" type="string" variable="comeTime" required="true"></activiti:formProperty>
        <activiti:formProperty id="maritalStatus_婚姻情况 Marital status_3_enum_sbs_$$B" name="婚姻情况 Marital status" type="enum" variable="maritalStatus">
          <activiti:value id="未婚" name="未婚 Unmarried"></activiti:value>
          <activiti:value id="已婚" name="已婚 Married"></activiti:value>
          <activiti:value id="离异" name="离异 Divorced"></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="fertilityStatus_生育情况 Parental status_4_enum_sbs_$$B" name="生育情况 Parental status" type="enum" variable="fertilityStatus">
          <activiti:value id="未育" name="未育 Infertility"></activiti:value>
          <activiti:value id="已育" name="已育 Cultivated"></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="politicalStatus_政治面貌 Political status_5_string_t1_$$B" name="政治面貌 Political status" type="string" variable="politicalStatus"></activiti:formProperty>
        <activiti:formProperty id="census_户籍 Household registration_1_string_t1_$$C" name="户籍 Household registration" type="string" variable="census"></activiti:formProperty>
        <activiti:formProperty id="socialSecurityPayment_社保缴纳地 Social security payment_2_string_t1_$$C" name="社保缴纳地 Social security payment" type="string" variable="socialSecurityPayment"></activiti:formProperty>
        <activiti:formProperty id="socialSecurityOperator_社保操作方 Social security operator_3_string_t1_$$C" name="社保操作方 Social security operator" type="string" variable="socialSecurityOperator"></activiti:formProperty>
        <activiti:formProperty id="residentialAddress_现居住地址 Current home address_4_string_t1_$$C" name="现居住地址 Current home address" type="string" variable="residentialAddress"></activiti:formProperty>
        <activiti:formProperty id="placeOfLegalDocuments_法律文书送达地 Place of legal documents_5_string_t1_$$C" name="法律文书送达地 Place of legal documents" variable="placeOfLegalDocuments"></activiti:formProperty>
        <activiti:formProperty id="socilaSecurityStartDate_社保缴纳起始年月 Social security payment start date_6_string_t3_$$C" name="社保缴纳起始年月 Social security payment start date" variable="socilaSecurityStartDate"></activiti:formProperty>
        <activiti:formProperty id="providentFundStartDate_公积金缴纳起始年月 Provident fund payment start date_7_string_t3_$$C" name="公积金缴纳起始年月 Provident fund payment start date" variable="providentFundStartDate"></activiti:formProperty>
        <activiti:formProperty id="educationalBackground_最高学历 Highest education_1_string_t1_$$D" name="最高学历 Highest education" type="string" variable="educationalBackground"></activiti:formProperty>
        <activiti:formProperty id="bachelorOfScience_最高学位 Highest degree_2_string_t1_$$D" name="最高学位 Highest degree" type="string" variable="bachelorOfScience"></activiti:formProperty>
        <activiti:formProperty id="major_专业 Major_3_string_t1_$$D" name="专业 Major" type="string" variable="major"></activiti:formProperty>
        <activiti:formProperty id="studyAbroad_是否留学  Is there a background for studying abroad_4_enum_sbs_$$D" name="是否有留学背景 Is there a background for studying abroad" type="enum" variable="studyAbroad">
          <activiti:value id="否" name="否 No"></activiti:value>
          <activiti:value id="是" name="是 Yes"></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="salaryCardNumber_工资卡卡号 Salary card number_1_string_t1_$$E" name="工资卡卡号 Salary card number" type="string" variable="salaryCardNumber" required="true"></activiti:formProperty>
        <activiti:formProperty id="payrollBank_工资卡开户行名称 Payroll bank name_2_string_t1_$$E" name="工资卡开户行名称 Payroll bank name" type="string" variable="payrollBank" required="true"></activiti:formProperty>
        <activiti:formProperty id="bankProvince_开户省 Account opening province_3_string_t1_$$E" name="开户省 Account opening province" type="string" variable="bankProvince" required="true"></activiti:formProperty>
        <activiti:formProperty id="bankCity_开户市 Account opening city_4_string_t1_$$E" name="开户市 Account opening city" type="string" variable="bankCity" required="true"></activiti:formProperty>
        <activiti:formProperty id="accountName_银行账户名 Bank account name_5_string_t1_$$E" name="银行账户名 Bank account name" type="string" variable="accountName" required="true"></activiti:formProperty>
        <activiti:formProperty id="payroller_工资发放方 Payroller_6_string_t1_$$E" name="工资发放方 Payroller" type="string" variable="payroller"></activiti:formProperty>
        <activiti:formProperty id="hireFrom_合同开始日期 Contract start date_1_string_t3_$$F" name="合同开始日期 Contract start date" type="string" variable="hireFrom" required="true"></activiti:formProperty>
        <activiti:formProperty id="hireTo_合同结束日期 Contract end date_2_string_t3_$$F" name="合同结束日期 Contract end date" type="string" variable="hireTo" required="true"></activiti:formProperty>
        <activiti:formProperty id="probationStart_试用期开始日期 Trial period start time_3_string_t3_$$F" name="试用期开始时间 Trial period start time" type="string" variable="probationStart" required="true"></activiti:formProperty>
        <activiti:formProperty id="probationEnd_试用期结束日期 Trial period end time_3_string_t3_$$F" name="试用期结束时间 Trial period end time" type="string" variable="probationEnd" required="true"></activiti:formProperty>
        <activiti:taskListener event="create" class="org.activiti.engine.impl.bpmn.listener.ScriptTaskListener">
          <activiti:field name="language">
            <activiti:string><![CDATA[groovy]]></activiti:string>
          </activiti:field>
          <activiti:field name="script">
            <activiti:string><![CDATA[execution = task.getExecution();
            	execution.setVariable('actualEntryTime',execution.getVariable('estimatedTimeOfEntry'))]]></activiti:string>
          </activiti:field>
        </activiti:taskListener>
      </extensionElements>
    </userTask>
    <scriptTask id="scripttask6" name="员工号重复校验" scriptFormat="groovy" activiti:autoStoreVariables="false">
      <script>
    	
    		execution.setVariable("_http_method", "GET");
			def headerMap = new java.util.HashMap&lt;String,String&gt;();			
			execution.setVariable("_http_headers", headerMap);
			execution.setVariable("_http_body", '');
			def ncCode = execution.getVariable('employeeId');
			def param=java.net.URLEncoder.encode('[{"type":"category","target":["variable",["template-tag","code"]],"value":\"'+ ncCode + '\"}]', "UTF-8");
			execution.setVariable("_http_url", 'https://bpmmb.dipont.com/public/question/6e71897e-f1eb-45f3-8344-13ab75f6ca86.json?parameters=' + param);
			execution.setVariable("_http_response_body", '');
			execution.setVariable("_http_response_status_code", '')
    	
    	</script>
    </scriptTask>
    <serviceTask id="servicetask6" name="Service Task" activiti:class="com.eorionsolution.riying.bpms.javaservice.http.RestAPIService"></serviceTask>
    <scriptTask id="scripttask7" name="校验结果解析 &amp; 构造EIM请求" scriptFormat="groovy" activiti:autoStoreVariables="false">
      <script>
    		import groovy.json.JsonSlurper
    		def jsonSlurper = new JsonSlurper()
    		def responseObj = jsonSlurper.parseText(_http_response_body)
    		if(!_http_response_status_code?.toString()?.startsWith('2') || responseObj.size() != 0) {
    			throw new org.activiti.engine.ActivitiIllegalArgumentException('当前员工号在NC系统已存在 The current employee number already exists in the NC system');
    		}
    		
    		import groovy.json.JsonSlurper;
				import groovy.json.JsonOutput;
				import java.util.*;
				//definition
				class Employee {
				    String sn;
				    String ncCode;
				    String identityCard;
				    Long identityCardFrom;
				    Long identityCardTo;
				    String name;
				    String sex;
				    String maritalStatus;
				    String nationality;//国籍
				    Long birth;
				    String birthCondition;//生育情况
				    String politicsStatus;//政治面貌
				    String censusRegister;//户籍
				    String diploma;//最高学历
				    String degree;//最高学位
				    String major;//专业
				    String studyAbroad;//是否有留学背景
				    String homeAddress;
				    String securityPayment;//社保缴纳地
				    String placeOfLegalDocuments;//法律文书送达地
				    String mobilePhone;
				    String mail;
				    List roles;
				    String workType;
				    String hireStatus;
				    Long entryGroupTime;//进入集团日期
				    Long hireFrom;//合同开始日期
				    Long hireTo;
				    Long entryTime;//入职日期
				    Long dimissionTime;//离职日期
				    String expenseType;//报销级别
				    String wagesCard;//工资卡号
				    String bankProvince;
				    String bankCity;
				    String openingBank;//开户银行
				    String accountName;//银行账户名
				    String accountNo;//银行账号
				    String corpSn;
				    String depSn;
				    List&lt;Manager&gt; managers;
				    //List&amp;lt;Map&amp;lt;String,String&amp;gt;&amp;gt; fnDeleagatees;//报销委托人[{"sn":"snCode"}]
				    String workAddress;
				    List&lt;CostCenter&gt; chargeToCostCenter;
				    String otherIdentify;
				    String socialSecurityOperator;//社保操作方
				    String payroller;//工资发放方
				    Long probationStart;//试用期开始时间
				    Long probationEnd;//试用期结束时间
				    Long socialSecurityStartDate;//社保缴纳起始年月
				    Long providentFundStartDate;//公积金缴纳起始年月
				    String leaderInChargeSn;
				}
				class Manager {
				    Map manager;//sn:""
				    List roles;
				}
				
				class CostCenter {
				    Map costCenter;//code:""
				    def rate;
				    String projectCode;
				    String projectName;
				    String function;
				    Long from;
				    Long to;
				}
				//script
				//build body
				def corpMap = jsonSlurper.parseText(legalCorp);
				def corpSn = corpMap.get("code");
				
				def deptSn = "";
				def deptVar = execution.getVariable("department");
				if (deptVar != null){
				    def deptMap = jsonSlurper.parseText(deptVar);
				    deptSn = deptMap.get("code");
				}
				
				def costCenterVar = execution.getVariable("tbhdentryprocess_item_std");
				def result = jsonSlurper.parseText(costCenterVar);
				def chargeToCostCenter = result.stream()
				        .map()
				{ it -&gt;
				    new CostCenter(
				            costCenter: ["code": it.costcenter.code],
				            rate: it.proportion.toDouble()/100,
				            projectCode: it.project.code,
				            projectName: it.project.name,
				            function: it.function,
				            from: execution.getVariable('actualEntryTime')?.toLong(),
				            to: execution.getVariable('hireTo')?.toLong()
				    )
				}
				.collect(java.util.stream.Collectors.toList())
				
				def employee = new Employee(
				        sn: execution.getVariable("sn"),
				        ncCode: execution.getVariable("employeeId"),
				        identityCard: execution.getVariable("idNumber"),
				        identityCardFrom: Long.parseLong(execution.getVariable("idNumberValidityPeriodFrom")),
				        identityCardTo: Long.parseLong(execution.getVariable("idNumberValidityPeriodTo")),
				        name: execution.getVariable("name"),
				        sex: execution.getVariable("sex"),
				        maritalStatus: execution.getVariable("maritalStatus"),
				        nationality: execution.getVariable("citizenship"),
				        birth: Long.parseLong(execution.getVariable("birthday")),
				        birthCondition: execution.getVariable("fertilityStatus"),
				        politicsStatus: execution.getVariable("politicalStatus"),
				        censusRegister: execution.getVariable("census"),
				        diploma: execution.getVariable("educationalBackground"),
				        degree: execution.getVariable("bachelorOfScience"),
				        major: execution.getVariable("major"),
				        studyAbroad: execution.getVariable("studyAbroad"),
				        homeAddress: execution.getVariable("residentialAddress"),
				        securityPayment: execution.getVariable("socialSecurityPayment"),
				        placeOfLegalDocuments: execution.getVariable("placeOfLegalDocuments"),
				        mobilePhone: execution.getVariable("contactPhone"),
				        mail: execution.getVariable("companyEmail"),
				        roles: [execution.getVariable("position")],
				        workType: execution.getVariable("employmentForms"),
				        hireStatus: "在职",
				        entryGroupTime: Long.parseLong(execution.getVariable("comeTime")),
				        hireFrom: Long.parseLong(execution.getVariable("hireFrom")),
				        hireTo: Long.parseLong(execution.getVariable("hireTo")),
				        entryTime: Long.parseLong(execution.getVariable("actualEntryTime")),
				        expenseType: execution.getVariable("rank"),
				        wagesCard: execution.getVariable("salaryCardNumber"),
				        bankProvince: execution.getVariable("bankProvince"),
				        bankCity:execution.getVariable("bankCity"),
				        openingBank: execution.getVariable("payrollBank"),
				        accountNo: execution.getVariable("salaryCardNumber"),
				        accountName: execution.getVariable("accountName"),
				        corpSn: corpSn,
				        otherIdentify: "",
				        depSn: deptSn,
				        workAddress: execution.getVariable("dutyStation"),
				        //fnDeleagatees:null,
				        chargeToCostCenter: chargeToCostCenter,
				        socialSecurityOperator: execution.getVariable('socialSecurityOperator'),
					    payroller: execution.getVariable('payroller'),
					    probationStart: execution.getVariable('probationStart')?.toLong(),
					    probationEnd: execution.getVariable('probationEnd')?.toLong(),
					    socialSecurityStartDate: execution.getVariable('socilaSecurityStartDate')?.toLong(),
					    providentFundStartDate: execution.getVariable('providentFundStartDate')?.toLong(),
					    leaderInChargeSn: execution.getVariable('inchargeOfTheApprover')?.toString()
				);
				if(execution.getVariable("reportTo") != null){
					employee.managers = [new Manager(manager: ["sn":execution.getVariable("reportTo")], roles: [])];
				} else {
					employee.managers = new java.util.ArrayList();
				}
				def body = JsonOutput.toJson(employee);
				
				//send request
				execution.setVariable("_http_method", "POST");
				def headerMap = new HashMap();
				headerMap.put("Content-Type","application/json");
				execution.setVariable("_http_headers", headerMap);
				
				execution.setVariable("_http_body", body);
				execution.setVariable("empJson", body);
				execution.setVariable("_http_url", eimUrl);
				execution.setVariable("_http_response_body", '');
				execution.setVariable("_http_response_status_code", '');
    	
    	</script>
    </scriptTask>
    <serviceTask id="servicetask7" name="Service Task" activiti:class="com.eorionsolution.riying.bpms.javaservice.http.RestAPIService"></serviceTask>
    <scriptTask id="scripttask8" name="EIM录入结果解析 &amp; 构造员工邮件" scriptFormat="groovy" activiti:autoStoreVariables="false">
      <script>
    	import groovy.json.JsonSlurper
    		import groovy.json.JsonOutput
    		
    		def jsonSlurper = new JsonSlurper()
			if (_http_response_status_code != 200) {
				def responseBody = jsonSlurper.parseText(_http_response_body);
				throw new org.activiti.engine.ActivitiIllegalArgumentException(responseBody.description);
			}
			
			def bodyMap = new HashMap()
			def detailMap = new HashMap()
			def dataMap = new HashMap()
			dataMap.put("personalMail","1")//标记
			
			def to = [execution.getVariable('companyEmail')];
			def cc = jsonSlurper.parseText(execution.getVariable('arrive'))
			
			detailMap.put("from",mailFrom)
			detailMap.put("to", to)
			detailMap.put("cc", cc)
			detailMap.put("subject", "入职通知")
			detailMap.put("templateName", "entry-notification-all-template")
			dataMap.put("name",execution.getVariable("name"))
			dataMap.put("url", "https://share.dipont.com/")
			detailMap.put("templateData",dataMap)
			bodyMap.put("mail", detailMap)
			def body = JsonOutput.toJson(bodyMap)
           	//send request
			execution.setVariable("_http_method", "POST")
			def headerMap = new HashMap()
			headerMap.put("Content-Type","application/json")
			execution.setVariable("_http_headers", headerMap)
			execution.setVariable("_http_body", body)
			execution.setVariable("staffMailBody", body)
			execution.setVariable("_http_url", mailUrl)
			execution.setVariable("_http_response_body", '')
			execution.setVariable("_http_response_status_code", '')
    	
    	</script>
    </scriptTask>
    <serviceTask id="servicetask8" name="Service Task" activiti:class="com.eorionsolution.riying.bpms.javaservice.http.RestAPIService"></serviceTask>
    <scriptTask id="scripttask9" name="构造财务邮件" scriptFormat="groovy" activiti:autoStoreVariables="false">
      <script>
    	
    		import groovy.json.JsonSlurper
			import groovy.json.JsonOutput
			
			def bodyMap = new HashMap()
			def detailMap = new HashMap()
			def jsonSlurper = new JsonSlurper()
			def dataMap = jsonSlurper.parseText(execution.getVariable("baseMailJson"))
			def timeStamp = Long.parseLong(execution.getVariable("actualEntryTime"))
			def actualEntryTime = java.time.format.DateTimeFormatter.ofPattern("yyyy-MM-dd").format(java.time.LocalDateTime.ofInstant(java.time.Instant.ofEpochMilli(timeStamp), java.time.ZoneId.systemDefault()))		
			dataMap.put("actualEntryTime",actualEntryTime)
			dataMap.put("estimatedTimeOfEntry","")
			dataMap.put("infoContent","1")//标记
			
			def to = [execution.getVariable("fins")]
			
			detailMap.put("from", mailFrom)
			detailMap.put("to", to)
			detailMap.put("subject", "新员工入职信息(财务查看)")
			detailMap.put("templateName", "entry-notification-all-template")
			detailMap.put("templateData",dataMap)
			bodyMap.put("mail", detailMap)
			def body = groovy.json.JsonOutput.toJson(bodyMap)
	          	//send request
			execution.setVariable("_http_method", "POST")
			def headerMap = new HashMap()
			headerMap.put("Content-Type","application/json")
			execution.setVariable("_http_headers", headerMap)
			execution.setVariable("_http_body", body)
			execution.setVariable("fnMailBody", body)
			execution.setVariable("_http_url", mailUrl)
			execution.setVariable("_http_response_body", '')
			execution.setVariable("_http_response_status_code", '')
    	
    	</script>
    </scriptTask>
    <userTask id="usertask4" name="IT录入NC任务" activiti:assignee="${its}">
      <extensionElements>
        <activiti:formProperty id="sn_员工ID Domain account_1_string_t1_$$VA" name="域账号 Domain account" type="string" variable="sn" required="true"></activiti:formProperty>
        <activiti:formProperty id="companyEmail_公司邮箱 Company email_2_string_t1_$$VA" name="公司邮箱 Company email" type="string" variable="companyEmail" required="true"></activiti:formProperty>
        <activiti:formProperty id="name_姓名 Name_1_string_t1_$$VB" name="姓名 Name" type="string" variable="name" required="true"></activiti:formProperty>
        <activiti:formProperty id="corp_实体 Legal entity_2_string_tree_$$VB" name="法律实体 Legal entity" type="string" variable="legalCorp" required="true"></activiti:formProperty>
        <activiti:formProperty id="idNumber_身份证件号码 ID Number_3_string_t1_$$VB" name="身份证件号码 ID Number" type="string" variable="idNumber" required="true"></activiti:formProperty>
        <activiti:formProperty id="employmentForms_用工形式 Employment forms_4_enum_sbs_$$VB" name="用工形式 Employment forms" type="string" variable="employmentForms" required="true"></activiti:formProperty>
        <activiti:formProperty id="rank_职级 Rank_5_enum_sbs_$$VB" name="职级 Rank" type="string" variable="rank" required="true"></activiti:formProperty>
        <activiti:formProperty id="reportTo_汇报对象 Reports to mail_1_string_psbi_$$VC" name="汇报对象邮箱 Reports to mail" type="string" variable="reportTo"></activiti:formProperty>
        <activiti:formProperty id="reportToName_汇报对象 Reports to_2_string_t1_$$VC" name="汇报对象 Reports to" type="string" variable="reportToName"></activiti:formProperty>
        <activiti:formProperty id="inchargeOfTheApprover_分管审批人 Leaders in charge mail_3_string_psbi_$$VC " name="分管审批人邮箱 Leaders in charge mail" type="string" variable="inchargeOfTheApprover" required="true"></activiti:formProperty>
        <activiti:formProperty id="inchargeOfTheApproverName_分管审批人 Leaders in charge_4_string_t1_$$VC " name="分管审批人 Leaders in charge" type="string" variable="inchargeOfTheApproverName"></activiti:formProperty>
        <activiti:formProperty id="department_部门 Department_5_string_tree_$$VC" name="部门 Department" type="string" variable="department"></activiti:formProperty>
        <activiti:formProperty id="position_职位 Position_6_string_t1_$$VC" name="职位 Position" type="string" variable="position" required="true"></activiti:formProperty>
        <activiti:formProperty id="dutyStation_工作地 Work place_1_string_t1_$$VD" name="工作地 Work place" type="string" variable="dutyStation" required="true"></activiti:formProperty>
        <activiti:formProperty id="contactPhone_联系电话 Phone number_2_string_t1_$$VD" name="联系电话 Phone number" type="string" variable="contactPhone" required="true"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_item_$$VA" name="成本中心明细" type="string" variable="tbhdentryprocess_item"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_成本中心 Costcenter_costcenter_1_string_tree_$$VA" name="成本中心 Cost Center" type="string" variable="tbhdentryprocess_costcenter_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_项目 Project_project_2_string_tree_$$VA" name="项目 Project" type="string" variable="tbhdentryprocess_project_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_职能 Function_function_3_enum_sbs_$$VA" name="职能 Function" type="string" variable="tbhdentryprocess_fuction_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_比例 Proportion_proportion_4_string_t6_$$VA" name="比例 Proportion" type="string" variable="tbhdentryprocess_proportion_t00"></activiti:formProperty>
        <activiti:taskListener event="complete" class="org.activiti.engine.impl.bpmn.listener.ScriptTaskListener">
          <activiti:field name="language">
            <activiti:string><![CDATA[groovy]]></activiti:string>
          </activiti:field>
          <activiti:field name="script">
            <activiti:string><![CDATA[def execution = task.getExecution()
            	execution.setVariable("_http_method", "POST")
				def headerMap = new java.util.HashMap<String,String>()			
				execution.setVariable("_http_headers", headerMap)
				execution.setVariable("_http_body", '')
				def processInstanceId = execution.getProcessInstanceId();
				def variableName = 'ncDataJson'
				def templateName = 'ncimport.xml'
				def baseUrl = 'https://bpmcs.dipont.com/decisiontables/v1/integrate/'
				def url = baseUrl + processInstanceId + '/' + variableName + '/with/' + templateName
				execution.setVariable("_http_url", url)
				execution.setVariable("_http_response_body", '')
				execution.setVariable("_http_response_status_code", '')]]></activiti:string>
          </activiti:field>
        </activiti:taskListener>
      </extensionElements>
    </userTask>
    <serviceTask id="servicetask9" name="Service Task" activiti:class="com.eorionsolution.riying.bpms.javaservice.http.RestAPIService"></serviceTask>
    <scriptTask id="scripttask10" name="NC录入结果解析" scriptFormat="groovy" activiti:autoStoreVariables="false">
      <script>
    	
    		def responseCode = execution.getVariable("_http_response_status_code");
    		
			if (responseCode != 200) {
				def errorMessage = new XmlParser().parseText(execution.getVariable('_http_response_body').replaceAll("\\&amp;lt;\\?xml(.+?)\\?\\&amp;gt;", "").trim()).sendresult.resultdescription.text();
     			throw new org.activiti.engine.ActivitiIllegalArgumentException(errorMessage+"请联系管理员 Please contact the administrator");
			}
    	
    	</script>
    </scriptTask>
    <parallelGateway id="parallelgateway3" name="Parallel Gateway"></parallelGateway>
    <userTask id="usertask5" name="取消入职任务" activiti:assignee="${initiator}">
      <extensionElements>
        <activiti:formProperty id="sn_员工ID Domain account_1_string_t1_$$VA" name="域账号 Domain account" type="string" variable="sn" required="true"></activiti:formProperty>
        <activiti:formProperty id="companyEmail_公司邮箱 Company email_2_string_t1_$$VA" name="公司邮箱 Company email" type="string" variable="companyEmail" required="true"></activiti:formProperty>
        <activiti:formProperty id="estimatedTimeOfEntry_预计入职时间 Estimated time of entry_3_string_t3_$$VA" name="预计入职时间 Estimated time of entry" type="string" variable="estimatedTimeOfEntry" required="true"></activiti:formProperty>
        <activiti:formProperty id="contractPeriod_合同期限 Contract term (unit/year)_4_string_t11_$$VA" name="合同期限（单位/年）Contract term (unit/year)" type="string" variable="contractPeriod" required="true"></activiti:formProperty>
        <activiti:formProperty id="trialPeriod_试用期时长 Duration of trial period (units/month)_5_string_t11_$$VA" name="试用期时长（单位/月）Duration of trial period (units/month)" type="string" variable="trialPeriod" required="true"></activiti:formProperty>
        <activiti:formProperty id="name_姓名 Name_1_string_t1_$$VB" name="姓名 Name" type="string" variable="name" required="true"></activiti:formProperty>
        <activiti:formProperty id="corp_实体 Legal entity_2_string_tree_$$VB" name="法律实体 Legal entity" type="string" variable="legalCorp" required="true"></activiti:formProperty>
        <activiti:formProperty id="idNumber_身份证件号码 ID Number_3_string_t1_$$VB" name="身份证件号码 ID Number" type="string" variable="idNumber" required="true"></activiti:formProperty>
        <activiti:formProperty id="employmentForms_用工形式 Employment forms_4_enum_sbs_$$VB" name="用工形式 Employment forms" type="string" variable="employmentForms" required="true"></activiti:formProperty>
        <activiti:formProperty id="rank_职级 Rank_5_enum_sbs_$$VB" name="职级 Rank" type="string" variable="rank" required="true"></activiti:formProperty>
        <activiti:formProperty id="reportTo_汇报对象 Reports to mail_1_string_psbi_$$VC" name="汇报对象邮箱 Reports to mail" type="string" variable="reportTo"></activiti:formProperty>
        <activiti:formProperty id="reportToName_汇报对象 Reports to_2_string_t1_$$VC" name="汇报对象 Reports to" type="string" variable="reportToName"></activiti:formProperty>
        <activiti:formProperty id="inchargeOfTheApprover_分管审批人 Leaders in charge mail_3_string_psbi_$$VC " name="分管审批人邮箱 Leaders in charge mail" type="string" variable="inchargeOfTheApprover" required="true"></activiti:formProperty>
        <activiti:formProperty id="inchargeOfTheApproverName_分管审批人 Leaders in charge_4_string_t1_$$VC " name="分管审批人 Leaders in charge" type="string" variable="inchargeOfTheApproverName"></activiti:formProperty>
        <activiti:formProperty id="department_部门 Department_5_string_tree_$$VC" name="部门 Department" type="string" variable="department"></activiti:formProperty>
        <activiti:formProperty id="position_职位 Position_6_string_t1_$$VC" name="职位 Position" type="string" variable="position" required="true"></activiti:formProperty>
        <activiti:formProperty id="dutyStation_工作地 Work place_1_string_t1_$$VD" name="工作地 Work place" type="string" variable="dutyStation" required="true"></activiti:formProperty>
        <activiti:formProperty id="contactPhone_联系电话 Phone number_2_string_t1_$$VD" name="联系电话 Phone number" type="string" variable="contactPhone" required="true"></activiti:formProperty>
        <activiti:formProperty id="basicMonthlySalary_基本月薪 Basic monthly salary_3_string_cny_$$VD" name="基本月薪 Basic monthly salary" type="string" variable="basicMonthlySalary" required="true"></activiti:formProperty>
        <activiti:formProperty id="mealSubsidy_餐费补贴 Meal subsidy_4_string_cny_$$VD" name="餐费补贴 Meal subsidy" type="string" variable="mealSubsidy" required="true"></activiti:formProperty>
        <activiti:formProperty id="annualPerformance_年度绩效 Annual performance_5_string_cny_$$VD" name="年度绩效 Annual performance" type="string" variable="annualPerformance" required="true"></activiti:formProperty>
        <activiti:formProperty id="others_其他补充 Other supplements_6_string_t2_$$VD" name="其他补充 Other supplements" type="string" variable="others" required="true"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_item_$$VA" name="成本中心明细" type="string" variable="tbhdentryprocess_item"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_成本中心 Costcenter_costcenter_1_string_tree_$$VA" name="成本中心 Cost Center" type="string" variable="tbhdentryprocess_costcenter_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_项目 Project_project_2_string_tree_$$VA" name="项目 Project" type="string" variable="tbhdentryprocess_project_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_职能 Function_function_3_enum_sbs_$$VA" name="职能 Function" type="string" variable="tbhdentryprocess_fuction_t00"></activiti:formProperty>
        <activiti:formProperty id="tbhdentryprocess_比例 Proportion_proportion_4_string_t6_$$VA" name="比例 Proportion" type="string" variable="tbhdentryprocess_proportion_t00"></activiti:formProperty>
        <activiti:formProperty id="offerattachment_附件_1_string_t9_$$VF" name="CV和offer附件" type="string" variable="offerattachment"></activiti:formProperty>
        <activiti:formProperty id="cancelthisprocess_取消此次离职流程 Confirm cancellation of the induction process_1_enum_rbv_$$A" name="确认取消此次入职流程 Confirm cancellation of the induction process" type="enum" variable="cancelthisprocess" required="true">
          <activiti:value id="Y" name="确认取消 confirm"></activiti:value>
        </activiti:formProperty>
      </extensionElements>
    </userTask>
    <sequenceFlow id="flow1" sourceRef="startevent1" targetRef="scripttask1"></sequenceFlow>
    <sequenceFlow id="flow2" sourceRef="scripttask1" targetRef="servicetask1"></sequenceFlow>
    <sequenceFlow id="flow3" sourceRef="servicetask1" targetRef="scripttask2"></sequenceFlow>
    <sequenceFlow id="flow4" sourceRef="scripttask2" targetRef="servicetask2"></sequenceFlow>
    <sequenceFlow id="flow5" sourceRef="servicetask2" targetRef="scripttask3"></sequenceFlow>
    <sequenceFlow id="flow6" sourceRef="scripttask3" targetRef="servicetask3"></sequenceFlow>
    <sequenceFlow id="flow7" sourceRef="servicetask3" targetRef="parallelgateway1"></sequenceFlow>
    <sequenceFlow id="flow8" sourceRef="parallelgateway1" targetRef="usertask1"></sequenceFlow>
    <sequenceFlow id="flow9" sourceRef="parallelgateway1" targetRef="usertask2"></sequenceFlow>
    <sequenceFlow id="flow10" sourceRef="usertask2" targetRef="exclusivegateway1"></sequenceFlow>
    <endEvent id="terminateendevent1" name="TerminateEndEvent">
      <terminateEventDefinition></terminateEventDefinition>
    </endEvent>
    <sequenceFlow id="flow11" name="拒绝入职" sourceRef="exclusivegateway1" targetRef="scripttask4">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${confirm=='N'}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow12" sourceRef="scripttask4" targetRef="servicetask4"></sequenceFlow>
    <sequenceFlow id="flow13" sourceRef="servicetask4" targetRef="terminateendevent1"></sequenceFlow>
    <sequenceFlow id="flow14" name="同意入职" sourceRef="exclusivegateway1" targetRef="exclusivegateway2">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${confirm=='Y'}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow15" name="需要公司提供电脑" sourceRef="exclusivegateway2" targetRef="scripttask5">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${provideComputer=='Y'}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow16" sourceRef="scripttask5" targetRef="servicetask5"></sequenceFlow>
    <sequenceFlow id="flow17" sourceRef="servicetask5" targetRef="exclusivegateway3"></sequenceFlow>
    <sequenceFlow id="flow18" name="不需要公司提供电脑" sourceRef="exclusivegateway2" targetRef="exclusivegateway3">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${provideComputer=='N'}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow19" sourceRef="parallelgateway2" targetRef="parallelgateway3"></sequenceFlow>
    <sequenceFlow id="flow20" sourceRef="parallelgateway3" targetRef="usertask3"></sequenceFlow>
    <sequenceFlow id="flow21" sourceRef="usertask3" targetRef="scripttask6"></sequenceFlow>
    <sequenceFlow id="flow22" sourceRef="scripttask6" targetRef="servicetask6"></sequenceFlow>
    <sequenceFlow id="flow23" sourceRef="servicetask6" targetRef="scripttask7"></sequenceFlow>
    <sequenceFlow id="flow24" sourceRef="scripttask7" targetRef="servicetask7"></sequenceFlow>
    <sequenceFlow id="flow25" sourceRef="servicetask7" targetRef="scripttask8"></sequenceFlow>
    <sequenceFlow id="flow26" sourceRef="scripttask8" targetRef="servicetask8"></sequenceFlow>
    <sequenceFlow id="flow27" sourceRef="servicetask8" targetRef="scripttask9"></sequenceFlow>
    <sequenceFlow id="flow28" sourceRef="scripttask9" targetRef="servicetask11"></sequenceFlow>
    <sequenceFlow id="flow29" sourceRef="usertask4" targetRef="servicetask9"></sequenceFlow>
    <sequenceFlow id="flow30" sourceRef="servicetask9" targetRef="scripttask10"></sequenceFlow>
    <sequenceFlow id="flow31" sourceRef="scripttask10" targetRef="terminateendevent2"></sequenceFlow>
    <sequenceFlow id="flow32" sourceRef="parallelgateway3" targetRef="usertask5"></sequenceFlow>
    <sequenceFlow id="flow33" sourceRef="usertask5" targetRef="scripttask4"></sequenceFlow>
    <endEvent id="terminateendevent2" name="End">
      <terminateEventDefinition></terminateEventDefinition>
    </endEvent>
    <sequenceFlow id="flow34" sourceRef="usertask1" targetRef="servicetask10"></sequenceFlow>
    <exclusiveGateway id="exclusivegateway3" name="Exclusive Gateway"></exclusiveGateway>
    <sequenceFlow id="flow35" sourceRef="exclusivegateway3" targetRef="parallelgateway2"></sequenceFlow>
    <serviceTask id="servicetask10" name="Service Task" activiti:class="com.eorionsolution.riying.bpms.javaservice.http.RestAPIService"></serviceTask>
    <sequenceFlow id="flow36" sourceRef="servicetask10" targetRef="parallelgateway2"></sequenceFlow>
    <serviceTask id="servicetask11" name="Service Task" activiti:class="com.eorionsolution.riying.bpms.javaservice.http.RestAPIService"></serviceTask>
    <sequenceFlow id="flow37" sourceRef="servicetask11" targetRef="usertask4"></sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_DPPE001">
    <bpmndi:BPMNPlane bpmnElement="DPPE001" id="BPMNPlane_DPPE001">
      <bpmndi:BPMNShape bpmnElement="startevent1" id="BPMNShape_startevent1">
        <omgdc:Bounds height="35.0" width="35.0" x="268.0" y="41.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask1" id="BPMNShape_scripttask1">
        <omgdc:Bounds height="61.0" width="111.0" x="230.0" y="110.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="servicetask1" id="BPMNShape_servicetask1">
        <omgdc:Bounds height="61.0" width="111.0" x="230.0" y="210.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask2" id="BPMNShape_scripttask2">
        <omgdc:Bounds height="61.0" width="111.0" x="230.0" y="310.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="servicetask2" id="BPMNShape_servicetask2">
        <omgdc:Bounds height="61.0" width="111.0" x="230.0" y="420.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask3" id="BPMNShape_scripttask3">
        <omgdc:Bounds height="61.0" width="111.0" x="230.0" y="520.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="servicetask3" id="BPMNShape_servicetask3">
        <omgdc:Bounds height="61.0" width="111.0" x="230.0" y="630.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="parallelgateway1" id="BPMNShape_parallelgateway1">
        <omgdc:Bounds height="40.0" width="40.0" x="265.0" y="730.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="usertask1" id="BPMNShape_usertask1">
        <omgdc:Bounds height="61.0" width="111.0" x="40.0" y="820.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="usertask2" id="BPMNShape_usertask2">
        <omgdc:Bounds height="61.0" width="111.0" x="370.0" y="820.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway1" id="BPMNShape_exclusivegateway1">
        <omgdc:Bounds height="40.0" width="40.0" x="405.0" y="930.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask4" id="BPMNShape_scripttask4">
        <omgdc:Bounds height="61.0" width="111.0" x="570.0" y="920.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="servicetask4" id="BPMNShape_servicetask4">
        <omgdc:Bounds height="61.0" width="111.0" x="570.0" y="1040.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway2" id="BPMNShape_exclusivegateway2">
        <omgdc:Bounds height="40.0" width="40.0" x="405.0" y="1040.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask5" id="BPMNShape_scripttask5">
        <omgdc:Bounds height="61.0" width="111.0" x="222.0" y="1030.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="servicetask5" id="BPMNShape_servicetask5">
        <omgdc:Bounds height="61.0" width="111.0" x="222.0" y="1130.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="parallelgateway2" id="BPMNShape_parallelgateway2">
        <omgdc:Bounds height="40.0" width="40.0" x="257.0" y="1220.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="usertask3" id="BPMNShape_usertask3">
        <omgdc:Bounds height="61.0" width="111.0" x="20.0" y="1330.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask6" id="BPMNShape_scripttask6">
        <omgdc:Bounds height="61.0" width="111.0" x="20.0" y="1430.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="servicetask6" id="BPMNShape_servicetask6">
        <omgdc:Bounds height="61.0" width="111.0" x="170.0" y="1430.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask7" id="BPMNShape_scripttask7">
        <omgdc:Bounds height="61.0" width="111.0" x="170.0" y="1540.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="servicetask7" id="BPMNShape_servicetask7">
        <omgdc:Bounds height="61.0" width="111.0" x="20.0" y="1540.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask8" id="BPMNShape_scripttask8">
        <omgdc:Bounds height="61.0" width="111.0" x="20.0" y="1640.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="servicetask8" id="BPMNShape_servicetask8">
        <omgdc:Bounds height="61.0" width="111.0" x="175.0" y="1640.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask9" id="BPMNShape_scripttask9">
        <omgdc:Bounds height="61.0" width="111.0" x="175.0" y="1750.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="usertask4" id="BPMNShape_usertask4">
        <omgdc:Bounds height="61.0" width="111.0" x="10.0" y="1855.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="servicetask9" id="BPMNShape_servicetask9">
        <omgdc:Bounds height="61.0" width="111.0" x="10.0" y="1950.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask10" id="BPMNShape_scripttask10">
        <omgdc:Bounds height="61.0" width="111.0" x="182.0" y="1950.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="parallelgateway3" id="BPMNShape_parallelgateway3">
        <omgdc:Bounds height="40.0" width="40.0" x="257.0" y="1340.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="usertask5" id="BPMNShape_usertask5">
        <omgdc:Bounds height="61.0" width="111.0" x="390.0" y="1430.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="terminateendevent1" id="BPMNShape_terminateendevent1">
        <omgdc:Bounds height="35.0" width="35.0" x="608.0" y="1156.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="terminateendevent2" id="BPMNShape_terminateendevent2">
        <omgdc:Bounds height="35.0" width="35.0" x="358.0" y="1963.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway3" id="BPMNShape_exclusivegateway3">
        <omgdc:Bounds height="40.0" width="40.0" x="405.0" y="1140.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="servicetask10" id="BPMNShape_servicetask10">
        <omgdc:Bounds height="61.0" width="111.0" x="40.0" y="1030.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="servicetask11" id="BPMNShape_servicetask11">
        <omgdc:Bounds height="61.0" width="111.0" x="10.0" y="1750.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="flow1" id="BPMNEdge_flow1">
        <omgdi:waypoint x="285.0" y="76.0"></omgdi:waypoint>
        <omgdi:waypoint x="285.0" y="110.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow2" id="BPMNEdge_flow2">
        <omgdi:waypoint x="285.0" y="171.0"></omgdi:waypoint>
        <omgdi:waypoint x="285.0" y="210.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow3" id="BPMNEdge_flow3">
        <omgdi:waypoint x="285.0" y="271.0"></omgdi:waypoint>
        <omgdi:waypoint x="285.0" y="310.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow4" id="BPMNEdge_flow4">
        <omgdi:waypoint x="285.0" y="371.0"></omgdi:waypoint>
        <omgdi:waypoint x="285.0" y="420.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow5" id="BPMNEdge_flow5">
        <omgdi:waypoint x="285.0" y="481.0"></omgdi:waypoint>
        <omgdi:waypoint x="285.0" y="520.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow6" id="BPMNEdge_flow6">
        <omgdi:waypoint x="285.0" y="581.0"></omgdi:waypoint>
        <omgdi:waypoint x="285.0" y="630.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow7" id="BPMNEdge_flow7">
        <omgdi:waypoint x="285.0" y="691.0"></omgdi:waypoint>
        <omgdi:waypoint x="285.0" y="730.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow8" id="BPMNEdge_flow8">
        <omgdi:waypoint x="265.0" y="750.0"></omgdi:waypoint>
        <omgdi:waypoint x="95.0" y="750.0"></omgdi:waypoint>
        <omgdi:waypoint x="95.0" y="820.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow9" id="BPMNEdge_flow9">
        <omgdi:waypoint x="305.0" y="750.0"></omgdi:waypoint>
        <omgdi:waypoint x="425.0" y="750.0"></omgdi:waypoint>
        <omgdi:waypoint x="425.0" y="820.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow10" id="BPMNEdge_flow10">
        <omgdi:waypoint x="425.0" y="881.0"></omgdi:waypoint>
        <omgdi:waypoint x="425.0" y="930.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow11" id="BPMNEdge_flow11">
        <omgdi:waypoint x="445.0" y="950.0"></omgdi:waypoint>
        <omgdi:waypoint x="570.0" y="950.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="16.0" width="44.0" x="479.0" y="930.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow12" id="BPMNEdge_flow12">
        <omgdi:waypoint x="625.0" y="981.0"></omgdi:waypoint>
        <omgdi:waypoint x="625.0" y="1040.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow13" id="BPMNEdge_flow13">
        <omgdi:waypoint x="625.0" y="1101.0"></omgdi:waypoint>
        <omgdi:waypoint x="625.0" y="1156.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow14" id="BPMNEdge_flow14">
        <omgdi:waypoint x="425.0" y="970.0"></omgdi:waypoint>
        <omgdi:waypoint x="425.0" y="1040.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="16.0" width="44.0" x="425.0" y="989.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow15" id="BPMNEdge_flow15">
        <omgdi:waypoint x="405.0" y="1060.0"></omgdi:waypoint>
        <omgdi:waypoint x="333.0" y="1060.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="16.0" width="88.0" x="333.0" y="1030.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow16" id="BPMNEdge_flow16">
        <omgdi:waypoint x="277.0" y="1091.0"></omgdi:waypoint>
        <omgdi:waypoint x="277.0" y="1130.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow17" id="BPMNEdge_flow17">
        <omgdi:waypoint x="333.0" y="1160.0"></omgdi:waypoint>
        <omgdi:waypoint x="405.0" y="1160.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow18" id="BPMNEdge_flow18">
        <omgdi:waypoint x="425.0" y="1080.0"></omgdi:waypoint>
        <omgdi:waypoint x="425.0" y="1140.0"></omgdi:waypoint>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds height="16.0" width="99.0" x="430.0" y="1101.0"></omgdc:Bounds>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow19" id="BPMNEdge_flow19">
        <omgdi:waypoint x="277.0" y="1260.0"></omgdi:waypoint>
        <omgdi:waypoint x="277.0" y="1340.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow20" id="BPMNEdge_flow20">
        <omgdi:waypoint x="257.0" y="1360.0"></omgdi:waypoint>
        <omgdi:waypoint x="131.0" y="1360.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow21" id="BPMNEdge_flow21">
        <omgdi:waypoint x="75.0" y="1391.0"></omgdi:waypoint>
        <omgdi:waypoint x="75.0" y="1430.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow22" id="BPMNEdge_flow22">
        <omgdi:waypoint x="131.0" y="1460.0"></omgdi:waypoint>
        <omgdi:waypoint x="170.0" y="1460.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow23" id="BPMNEdge_flow23">
        <omgdi:waypoint x="225.0" y="1491.0"></omgdi:waypoint>
        <omgdi:waypoint x="225.0" y="1540.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow24" id="BPMNEdge_flow24">
        <omgdi:waypoint x="170.0" y="1570.0"></omgdi:waypoint>
        <omgdi:waypoint x="131.0" y="1570.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow25" id="BPMNEdge_flow25">
        <omgdi:waypoint x="75.0" y="1601.0"></omgdi:waypoint>
        <omgdi:waypoint x="75.0" y="1640.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow26" id="BPMNEdge_flow26">
        <omgdi:waypoint x="131.0" y="1670.0"></omgdi:waypoint>
        <omgdi:waypoint x="175.0" y="1670.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow27" id="BPMNEdge_flow27">
        <omgdi:waypoint x="230.0" y="1701.0"></omgdi:waypoint>
        <omgdi:waypoint x="230.0" y="1750.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow28" id="BPMNEdge_flow28">
        <omgdi:waypoint x="175.0" y="1780.0"></omgdi:waypoint>
        <omgdi:waypoint x="121.0" y="1780.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow29" id="BPMNEdge_flow29">
        <omgdi:waypoint x="65.0" y="1916.0"></omgdi:waypoint>
        <omgdi:waypoint x="65.0" y="1950.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow30" id="BPMNEdge_flow30">
        <omgdi:waypoint x="121.0" y="1980.0"></omgdi:waypoint>
        <omgdi:waypoint x="182.0" y="1980.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow31" id="BPMNEdge_flow31">
        <omgdi:waypoint x="293.0" y="1980.0"></omgdi:waypoint>
        <omgdi:waypoint x="358.0" y="1980.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow32" id="BPMNEdge_flow32">
        <omgdi:waypoint x="297.0" y="1360.0"></omgdi:waypoint>
        <omgdi:waypoint x="445.0" y="1360.0"></omgdi:waypoint>
        <omgdi:waypoint x="445.0" y="1430.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow33" id="BPMNEdge_flow33">
        <omgdi:waypoint x="501.0" y="1460.0"></omgdi:waypoint>
        <omgdi:waypoint x="723.0" y="1460.0"></omgdi:waypoint>
        <omgdi:waypoint x="723.0" y="1215.0"></omgdi:waypoint>
        <omgdi:waypoint x="723.0" y="951.0"></omgdi:waypoint>
        <omgdi:waypoint x="681.0" y="950.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow34" id="BPMNEdge_flow34">
        <omgdi:waypoint x="95.0" y="881.0"></omgdi:waypoint>
        <omgdi:waypoint x="95.0" y="1014.0"></omgdi:waypoint>
        <omgdi:waypoint x="95.0" y="1030.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow35" id="BPMNEdge_flow35">
        <omgdi:waypoint x="425.0" y="1180.0"></omgdi:waypoint>
        <omgdi:waypoint x="424.0" y="1240.0"></omgdi:waypoint>
        <omgdi:waypoint x="297.0" y="1240.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow36" id="BPMNEdge_flow36">
        <omgdi:waypoint x="95.0" y="1091.0"></omgdi:waypoint>
        <omgdi:waypoint x="95.0" y="1239.0"></omgdi:waypoint>
        <omgdi:waypoint x="257.0" y="1240.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow37" id="BPMNEdge_flow37">
        <omgdi:waypoint x="65.0" y="1811.0"></omgdi:waypoint>
        <omgdi:waypoint x="65.0" y="1855.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>