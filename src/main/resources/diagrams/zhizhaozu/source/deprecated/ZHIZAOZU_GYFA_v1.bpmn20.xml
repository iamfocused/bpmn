<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.activiti.org/pur">
  <process id="craftway0902" name="craftway0902" isExecutable="true" activiti:candidateStarterUsers="18616741835" activiti:candidateStarterGroups="admin">
    <startEvent id="StartEvent_1" activiti:initiator="initiator">
      <extensionElements>
        <activiti:formProperty id="processnumber_工艺编号_1_string_t1_$$A" name="工艺编号" type="string" variable="processnumber"></activiti:formProperty>
        <activiti:formProperty id="processname_工艺名称_2_string_t1_$$A" name="工艺名称" type="string" variable="processname"></activiti:formProperty>
        <activiti:formProperty id="processdesc_工艺描述_3_string_t2_$$A" name="工艺描述" type="string" variable="processdesc"></activiti:formProperty>
        <activiti:formProperty id="EAN_物料编号_4_string_t1_$$A" name="物料编号" type="string" variable="EAN"></activiti:formProperty>
        <activiti:formProperty id="ORDCODE_物料型号_5_string_t1_$$A" name="物料型号" type="string" variable="ORDCODE"></activiti:formProperty>
        <activiti:formProperty id="mainmaterial_主要材料_6_string_t1_$$A" name="主要材料" type="string" variable="mainmaterial"></activiti:formProperty>
        <activiti:formProperty id="2dnumber_二维图号_7_string_t1_$$A" name="二维图号" type="string" variable="2dnumber"></activiti:formProperty>
        <activiti:formProperty id="3dnumber_三维模型_8_string_t1_$$A" name="三维模型" type="string" variable="3dnumber"></activiti:formProperty>
        <activiti:formProperty id="processeditor_工艺编制_9_string_t1_$$A" name="工艺编制" type="string" variable="processeditor"></activiti:formProperty>
        <activiti:formProperty id="edittime_编制时间_10_string_t5_$$A" name="编制时间" type="string" variable="edittime"></activiti:formProperty>
        <activiti:formProperty id="processcheck_工艺审核_11_string_t1_$$A" name="工艺审核" type="string" variable="processeditor"></activiti:formProperty>
        <activiti:formProperty id="checktime_审核时间_12_string_t5_$$A" name="审核时间" type="string" variable="edittime"></activiti:formProperty>
        <activiti:formProperty id="WORKDAY_工作天数（天/年）_13_string_t6_$$A" name="工作天数（天/年）" type="string" variable="WORKDAY"></activiti:formProperty>
        <activiti:formProperty id="SHIFT_换班次数（班/天）_14_string_t6_$$A" name="换班次数（班/天）" type="string" variable="WORKDAY"></activiti:formProperty>
        <activiti:formProperty id="SHIFTH_单班工作时间（小时）_15_string_t6_$$A" name="单班工作时间（小时）" type="string" variable="WORKDAY"></activiti:formProperty>
        <activiti:formProperty id="TMCYCLE_工艺节拍（秒）_16_string_t6_$$HA" name="工艺节拍（秒）" type="string" variable="WORKDAY"></activiti:formProperty>
        <activiti:formProperty id="LINE_规划产线数_17_string_t6_$$A" name="规划产线数" type="string" variable="LINE"></activiti:formProperty>
        <activiti:formProperty id="PROCAP_产能测算（件/年）_18_string_t6_$$VA" name="产能测算（件/年）" type="string" variable="PROCAP"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_item" name="工序表" type="string" variable="header1566744708879"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_opnumber_工序编号_2_string_t1_$$A" name="工序编号" type="string" variable="opnumber"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_opname_工序名称_3_string_t1_$$A" name="工序名称" type="string" variable="opnumber"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_sendsectionnumber_分配工段编号_4_string_t1_$$A" name="分配工段编号" type="string" variable="sendsectionnumber"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_plannedstarttime_计划开始时间_5_string_t5_$$A" name="计划开始时间" type="string" variable="plannedstarttime"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_plannedendtime_计划结束时间_6_string_t5_$$A" name="计划结束时间" type="string" variable="plannedstarttime"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_optype_工序类型_7_enum_sbs_$$A" name="工序类型" type="enum" variable="optype">
          <activiti:value id="通用" name="通用"></activiti:value>
          <activiti:value id="车削" name="车削"></activiti:value>
          <activiti:value id="铣削" name="铣削"></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_opdesc_工序描述_8_string_t2_$$A" name="工序描述" type="string" variable="opdesc"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_eqpttypecode_设备型号_9_string_t1_$$A" name="设备型号" type="string" variable="opnumber"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_NOFIX_装夹件数（件）_10_string_t6_$$A" name="装夹件数（件）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_TMHA_人员操作时间（秒）_11_string_t6_$$A" name="人员操作时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_TMQC_人工检测时间（秒）_12_string_t6_$$A" name="人工检测时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_TMNO_其它时间（秒）_13_string_t6_$$A" name="其它时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_TMMT_加工时间（秒）_14_string_t6_$$VA" name="加工时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_TMOP_工序时间（秒）_15_string_t6_$$VA" name="工序时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_opsketch_工序简图_16_string_t9i_$$A" name="工序简图" type="string" variable="opsketch"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_opprogram_加工程序_17_string_t9i_$$A" name="加工程序" type="string" variable="opsketch"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_header1566746042674_工序物料清单_18_string_join_$$A" name="工序物料清单" type="string" variable="join1566748354574"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_header-1566746045871_工序工具清单_19_string_join_$$A" name="工序工具清单" type="string" variable="join1566748354574"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_header-1566746045367_工序检验指标_20_string_join_$$A" name="工序检验指标" type="string" variable="join1566748354574"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_header-1566746044755_通用工步表_21_string_join_$$A" name="通用工步表" type="string" variable="join1566748354574"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_header-1566746165617_车削工步表_22_string_join_$$A" name="车削工步表" type="string" variable="join1566748354574"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_header-1566746163577_铣削工步表_23_string_join_$$A" name="铣削工步表" type="string" variable="join1566748354574"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header1566746042674_item" name="工序物料清单" type="string" variable="header1566746042674"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header1566746042674_itemname2_物料名称_2_string_t1_$$A" name="物料名称" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header1566746042674_ORDCODE2_物料型号_3_string_t1_$$A" name="物料型号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header1566746042674_EAN2_物料编号_4_string_t1_$$A" name="物料编号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header1566746042674_EANQTY_数量_5_string_t6_$$A" name="数量" type="string" variable="number1566746194008"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header1566746042674_join-key_Key_10_string_t1_$$A" name="Key" type="string"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045871_item" name="工序工具清单" type="string" variable="header1566746042674"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045871_toolname_工具名称_2_string_t1_$$A" name="工具名称" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045871_tooltypecode_工具型号_3_string_t1_$$A" name="工具型号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045871_toolnumber_工具编号_4_string_t1_$$A" name="工具编号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045871_toolqty_数量_5_string_t6_$$A" name="数量" type="string" variable="number1566746194008"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045871_join-key_Key_10_string_t1_$$A" name="Key" type="string"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045367_item" name="工序检验指标" type="string" variable="header1566746042674"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045367_inspecitem_检验指标（附单位）_2_string_t1_$$A" name="检验指标（附单位）" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045367_valuemax_检测值上限_3_string_t6_$$A" name="检测值上限" type="string" variable="number1566746194008"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045367_valuemin_检测值下限_4_string_t6_$$A" name="检测值下限" type="string" variable="number1566746194008"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045367_join-key_Key_10_string_t1_$$A" name="Key" type="string"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_item" name="通用工步表" type="string" variable="header1566746042674"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_commonstepnumber_工步序号_2_string_t1_$$A" name="工步序号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_cstoolnumber_工具编号_3_string_t1_$$A" name="工具编号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_cstoolname_工具名称_4_string_t1_$$A" name="工具名称" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_csdesc_工步描述_5_string_t2_$$A" name="工步描述" type="string" variable="csdesc"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_csTMENG_工进时间（秒）_6_string_t6_$$A" name="工进时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_csTMSUP_辅助时间（秒）_7_string_t6_$$A" name="辅助时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_join-key_Key_10_string_t1_$$A" name="Key" type="string"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_item" name="车削工步表" type="string" variable="header1566746042674"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsnumber_工步序号_2_string_t1_$$A" name="工步序号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_knifesetnumber_刀组编号_3_string_t1_$$A" name="刀组编号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_knifesetname_刀组名称_4_string_t1_$$A" name="刀组名称" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsdesc_工步描述_5_string_t2_$$A" name="工步描述" type="string" variable="csdesc"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsVC_切削速度（m/min）_6_string_t6_$$A" name="切削速度（m/min）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsDCX_最大车削直径（mm）_7_string_t6_$$A" name="最大车削直径（mm）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsDCN_最小车削直径（mm）_8_string_t6_$$A" name="最小车削直径（mm）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsFR_每转进给量（mm/rev）_9_string_t6_$$A" name="每转进给量（mm/rev）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsLC_切削长度（mm）_10_string_t6_$$A" name="切削长度（mm）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsNOC_切削次数（次）_11_string_t6_$$A" name="切削次数（次）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsNOLIFE_刀具寿命（件）_12_string_t6_$$A" name="刀具寿命（件）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsRPMAVE_平均转速（rev/min）_13_string_t6_$$A" name="平均转速（rev/min）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsVF_进给速度（mm/min）_14_string_t6_$$A" name="进给速度（mm/min）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsTMENG_工进时间（秒）_15_string_t6_$$A" name="工进时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsTMTCT_换刀时间（秒）_16_string_t6_$$A" name="换刀时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsTMPOSS_单次定位时间（秒）_17_string_t6_$$A" name="单次定位时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsTMPOS_定位时间（秒）_18_string_t6_$$A" name="定位时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsTMSUP_辅助时间（秒）_19_string_t6_$$A" name="辅助时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_join-key_Key_10_string_t1_$$A" name="Key" type="string"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_item" name="铣削工步表" type="string" variable="header1566746042674"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msnumber_工步序号_2_string_t1_$$A" name="工步序号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msknifesetnumber_刀组编号_3_string_t1_$$A" name="刀组编号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msknifesetname_刀组名称_4_string_t1_$$A" name="刀组名称" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_textarea-1566747167443_工步描述_5_string_t2_$$A" name="工步描述" type="string" variable="csdesc"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msVC_切削速度（m/min）_6_string_t6_$$A" name="切削速度（m/min）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msDC_切削直径（mm）_7_string_t6_$$A" name="切削直径（mm）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msFT_每齿进给量（mm/tooth）_8_string_t6_$$A" name="每齿进给量（mm/tooth）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msZEFF_有效齿数&amp;nbsp;_9_string_t6_$$A" name="有效齿数&amp;nbsp;" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msLC_切削长度（mm）_10_string_t6_$$A" name="切削长度（mm）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msNOC_切削次数（次）_11_string_t6_$$A" name="切削次数（次）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msNOLIFE_刀具寿命（件）_12_string_t6_$$A" name="刀具寿命（件）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msRPM_转速（rev/min）_13_string_t6_$$A" name="转速（rev/min）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msVF_进给速度（mm/min）_14_string_t6_$$A" name="进给速度（mm/min）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msTMENG_工进时间（秒）_15_string_t6_$$A" name="工进时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msTMTCT_换刀时间（秒）_16_string_t6_$$A" name="换刀时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msTMPOSS_单次定位时间（秒）_17_string_t6_$$A" name="单次定位时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msTMPOS_定位时间（秒）_18_string_t6_$$A" name="定位时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msTMSUP_辅助时间（秒）_19_string_t6_$$A" name="辅助时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_join-key_Key_10_string_t1_$$A" name="Key" type="string"></activiti:formProperty>
      </extensionElements>
    </startEvent>
    <endEvent id="EndEvent_0kt0bir"></endEvent>
    <sequenceFlow id="SequenceFlow_0ukfcms" sourceRef="StartEvent_1" targetRef="scripttask1"></sequenceFlow>
    <userTask id="usertask1" name="循环修改任务" activiti:assignee="${initiator}">
      <extensionElements>
        <activiti:formProperty id="processnumber_工艺编号_1_string_t1_$$A" name="工艺编号" type="string" variable="processnumber"></activiti:formProperty>
        <activiti:formProperty id="processname_工艺名称_2_string_t1_$$A" name="工艺名称" type="string" variable="processname"></activiti:formProperty>
        <activiti:formProperty id="processdesc_工艺描述_3_string_t2_$$A" name="工艺描述" type="string" variable="processdesc"></activiti:formProperty>
        <activiti:formProperty id="EAN_物料编号_4_string_t1_$$A" name="物料编号" type="string" variable="EAN"></activiti:formProperty>
        <activiti:formProperty id="ORDCODE_物料型号_5_string_t1_$$A" name="物料型号" type="string" variable="ORDCODE"></activiti:formProperty>
        <activiti:formProperty id="mainmaterial_主要材料_6_string_t1_$$A" name="主要材料" type="string" variable="mainmaterial"></activiti:formProperty>
        <activiti:formProperty id="2dnumber_二维图号_7_string_t1_$$A" name="二维图号" type="string" variable="2dnumber"></activiti:formProperty>
        <activiti:formProperty id="3dnumber_三维模型_8_string_t1_$$A" name="三维模型" type="string" variable="3dnumber"></activiti:formProperty>
        <activiti:formProperty id="processeditor_工艺编制_9_string_t1_$$A" name="工艺编制" type="string" variable="processeditor"></activiti:formProperty>
        <activiti:formProperty id="edittime_编制时间_10_string_t5_$$A" name="编制时间" type="string" variable="edittime"></activiti:formProperty>
        <activiti:formProperty id="processcheck_工艺审核_11_string_t1_$$A" name="工艺审核" type="string" variable="processeditor"></activiti:formProperty>
        <activiti:formProperty id="checktime_审核时间_12_string_t5_$$A" name="审核时间" type="string" variable="edittime"></activiti:formProperty>
        <activiti:formProperty id="WORKDAY_工作天数（天/年）_13_string_t6_$$A" name="工作天数（天/年）" type="string" variable="WORKDAY"></activiti:formProperty>
        <activiti:formProperty id="SHIFT_换班次数（班/天）_14_string_t6_$$A" name="换班次数（班/天）" type="string" variable="WORKDAY"></activiti:formProperty>
        <activiti:formProperty id="SHIFTH_单班工作时间（小时）_15_string_t6_$$A" name="单班工作时间（小时）" type="string" variable="WORKDAY"></activiti:formProperty>
        <activiti:formProperty id="TMCYCLE_工艺节拍（秒）_16_string_t6_$$A" name="工艺节拍（秒）" type="string" variable="WORKDAY"></activiti:formProperty>
        <activiti:formProperty id="LINE_规划产线数_17_string_t6_$$A" name="规划产线数" type="string" variable="WORKDAY"></activiti:formProperty>
        <activiti:formProperty id="PROCAP_产能测算（件/年）_18_string_t6_$$A" name="产能测算（件/年）" type="string" variable="PROCAP"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_item" name="工序表" type="string" variable="header1566744708879"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_opnumber_工序编号_2_string_t1_$$A" name="工序编号" type="string" variable="opnumber"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_opname_工序名称_3_string_t1_$$A" name="工序名称" type="string" variable="opnumber"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_sendsectionnumber_分配工段编号_4_string_t1_$$A" name="分配工段编号" type="string" variable="sendsectionnumber"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_plannedstarttime_计划开始时间_5_string_t5_$$A" name="计划开始时间" type="string" variable="plannedstarttime"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_plannedendtime_计划结束时间_6_string_t5_$$A" name="计划结束时间" type="string" variable="plannedstarttime"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_optype_工序类型_7_enum_sbs_$$A" name="工序类型" type="enum" variable="optype">
          <activiti:value id="通用" name="通用"></activiti:value>
          <activiti:value id="车削" name="车削"></activiti:value>
          <activiti:value id="铣削" name="铣削"></activiti:value>
        </activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_opdesc_工序描述_8_string_t2_$$A" name="工序描述" type="string" variable="opdesc"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_eqpttypecode_设备型号_9_string_t1_$$A" name="设备型号" type="string" variable="opnumber"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_NOFIX_装夹件数（件）_10_string_t6_$$A" name="装夹件数（件）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_TMHA_人员操作时间（秒）_11_string_t6_$$A" name="人员操作时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_TMQC_人工检测时间（秒）_12_string_t6_$$A" name="人工检测时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_TMNO_其它时间（秒）_13_string_t6_$$A" name="其它时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_TMMT_加工时间（秒）_14_string_t6_$$VA" name="加工时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_TMOP_工序时间（秒）_15_string_t6_$$VA" name="工序时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_opsketch_工序简图_16_string_t9i_$$A" name="工序简图" type="string" variable="opsketch"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_opprogram_加工程序_17_string_t9i_$$A" name="加工程序" type="string" variable="opsketch"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_header1566746042674_工序物料清单_18_string_join_$$A" name="工序物料清单" type="string" variable="join1566748354574"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_header-1566746045871_工序工具清单_19_string_join_$$A" name="工序工具清单" type="string" variable="join1566748354574"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_header-1566746045367_工序检验指标_20_string_join_$$A" name="工序检验指标" type="string" variable="join1566748354574"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_header-1566746044755_通用工步表_21_string_join_$$A" name="通用工步表" type="string" variable="join1566748354574"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_header-1566746165617_车削工步表_22_string_join_$$A" name="车削工步表" type="string" variable="join1566748354574"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879_header-1566746163577_铣削工步表_23_string_join_$$A" name="铣削工步表" type="string" variable="join1566748354574"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header1566746042674_item" name="工序物料清单" type="string" variable="header1566746042674"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header1566746042674_itemname2_物料名称_2_string_t1_$$A" name="物料名称" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header1566746042674_ORDCODE2_物料型号_3_string_t1_$$A" name="物料型号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header1566746042674_EAN2_物料编号_4_string_t1_$$A" name="物料编号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header1566746042674_EANQTY_数量_5_string_t6_$$A" name="数量" type="string" variable="number1566746194008"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header1566746042674_join-key_Key_10_string_t1_$$A" name="Key" type="string"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045871_item" name="工序工具清单" type="string" variable="header1566746042674"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045871_toolname_工具名称_2_string_t1_$$A" name="工具名称" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045871_tooltypecode_工具型号_3_string_t1_$$A" name="工具型号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045871_toolnumber_工具编号_4_string_t1_$$A" name="工具编号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045871_toolqty_数量_5_string_t6_$$A" name="数量" type="string" variable="number1566746194008"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045871_join-key_Key_10_string_t1_$$A" name="Key" type="string"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045367_item" name="工序检验指标" type="string" variable="header1566746042674"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045367_inspecitem_检验指标（附单位）_2_string_t1_$$A" name="检验指标（附单位）" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045367_valuemax_检测值上限_3_string_t6_$$A" name="检测值上限" type="string" variable="number1566746194008"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045367_valuemin_检测值下限_4_string_t6_$$A" name="检测值下限" type="string" variable="number1566746194008"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746045367_join-key_Key_10_string_t1_$$A" name="Key" type="string"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_item" name="通用工步表" type="string" variable="header1566746042674"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_commonstepnumber_工步序号_2_string_t1_$$A" name="工步序号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_cstoolnumber_工具编号_3_string_t1_$$A" name="工具编号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_cstoolname_工具名称_4_string_t1_$$A" name="工具名称" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_csdesc_工步描述_5_string_t2_$$A" name="工步描述" type="string" variable="csdesc"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_csTMENG_工进时间（秒）_6_string_t6_$$A" name="工进时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_csTMSUP_辅助时间（秒）_7_string_t6_$$A" name="辅助时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746044755_join-key_Key_10_string_t1_$$A" name="Key" type="string"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_item" name="车削工步表" type="string" variable="header1566746042674"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsnumber_工步序号_2_string_t1_$$A" name="工步序号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_knifesetnumber_刀组编号_3_string_t1_$$A" name="刀组编号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_knifesetname_刀组名称_4_string_t1_$$A" name="刀组名称" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsdesc_工步描述_5_string_t2_$$A" name="工步描述" type="string" variable="csdesc"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsVC_切削速度（m/min）_6_string_t6_$$A" name="切削速度（m/min）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsDCX_最大车削直径（mm）_7_string_t6_$$A" name="最大车削直径（mm）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsDCN_最小车削直径（mm）_8_string_t6_$$A" name="最小车削直径（mm）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsFR_每转进给量（mm/rev）_9_string_t6_$$A" name="每转进给量（mm/rev）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsLC_切削长度（mm）_10_string_t6_$$A" name="切削长度（mm）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsNOC_切削次数（次）_11_string_t6_$$A" name="切削次数（次）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsNOLIFE_刀具寿命（件）_12_string_t6_$$A" name="刀具寿命（件）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsRPMAVE_平均转速（rev/min）_13_string_t6_$$A" name="平均转速（rev/min）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsVF_进给速度（mm/min）_14_string_t6_$$A" name="进给速度（mm/min）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsTMENG_工进时间（秒）_15_string_t6_$$A" name="工进时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsTMTCT_换刀时间（秒）_16_string_t6_$$A" name="换刀时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsTMPOSS_单次定位时间（秒）_17_string_t6_$$A" name="单次定位时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsTMPOS_定位时间（秒）_18_string_t6_$$A" name="定位时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_tsTMSUP_辅助时间（秒）_19_string_t6_$$A" name="辅助时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746165617_join-key_Key_10_string_t1_$$A" name="Key" type="string"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_item" name="铣削工步表" type="string" variable="header1566746042674"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msnumber_工步序号_2_string_t1_$$A" name="工步序号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msknifesetnumber_刀组编号_3_string_t1_$$A" name="刀组编号" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msknifesetname_刀组名称_4_string_t1_$$A" name="刀组名称" type="string" variable="itemname2"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_textarea-1566747167443_工步描述_5_string_t2_$$A" name="工步描述" type="string" variable="csdesc"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msVC_切削速度（m/min）_6_string_t6_$$A" name="切削速度（m/min）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msDC_切削直径（mm）_7_string_t6_$$A" name="切削直径（mm）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msFT_每齿进给量（mm/tooth）_8_string_t6_$$A" name="每齿进给量（mm/tooth）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msZEFF_有效齿数&amp;nbsp;_9_string_t6_$$A" name="有效齿数&amp;nbsp;" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msLC_切削长度（mm）_10_string_t6_$$A" name="切削长度（mm）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msNOC_切削次数（次）_11_string_t6_$$A" name="切削次数（次）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msNOLIFE_刀具寿命（件）_12_string_t6_$$A" name="刀具寿命（件）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msRPM_转速（rev/min）_13_string_t6_$$A" name="转速（rev/min）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msVF_进给速度（mm/min）_14_string_t6_$$A" name="进给速度（mm/min）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msTMENG_工进时间（秒）_15_string_t6_$$A" name="工进时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msTMTCT_换刀时间（秒）_16_string_t6_$$A" name="换刀时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msTMPOSS_单次定位时间（秒）_17_string_t6_$$A" name="单次定位时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msTMPOS_定位时间（秒）_18_string_t6_$$A" name="定位时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_msTMSUP_辅助时间（秒）_19_string_t6_$$A" name="辅助时间（秒）" type="string" variable="NOFIX"></activiti:formProperty>
        <activiti:formProperty id="tbheader1566744708879-header-1566746163577_join-key_Key_10_string_t1_$$A" name="Key" type="string"></activiti:formProperty>
      </extensionElements>
    </userTask>
    <sequenceFlow id="flow1" sourceRef="usertask1" targetRef="scripttask1"></sequenceFlow>
    <scriptTask id="scripttask1" name="字段计算" activiti:autoStoreVariables="false" scriptFormat="groovy">
    	<script>
    	<![CDATA[
    		import groovy.json.JsonOutput
			import groovy.json.JsonSlurper
			import java.math.MathContext
			import java.math.RoundingMode
			import java.util.stream.Collectors
			
			def jsonSlurper = new JsonSlurper()
			//主表Std
			def totalStd = jsonSlurper.parseText(execution.getVariable('tbheader1566744708879_item_std'))
			//主表item
			def totalItem = jsonSlurper.parseText(execution.getVariable('header1566744708879'))
			
			//通用工步子表
			List tyStd = jsonSlurper.parseText(execution.getVariable('tbheader1566744708879-header-1566746044755_item_std'))
			//车削工步子表
			List cxStd = jsonSlurper.parseText(execution.getVariable('tbheader1566744708879-header-1566746165617_item_std'))
			//铣削工步子表
			List xxStd = jsonSlurper.parseText(execution.getVariable('tbheader1566744708879-header-1566746163577_item_std'))				
			
			def mc = new MathContext(2, RoundingMode.HALF_UP)
			
			//工艺节拍
			def tmcycle = totalStd.stream().mapToDouble({it.get('工序时间（秒）').toBigDecimal().divide(it.get('装夹件数（件）').toBigDecimal(),mc).toDouble()}).max().orElse(0).toString()
			execution.setVariable('TMCYCLE', tmcycle)
			//产能测算
			
			//def procap = BigDecimal.valueOf(3600).multiply(execution.getVariable('LINE').toBigDecimal()).multiply(execution.getVariable('WORKDAY').toBigDecimal()).multiply(execution.getVariable('SHIFT').toBigDecimal()).divide(execution.getVariable('TMCYCLE').toBigDecimal(),mc).toString()
			//execution.setVariable('PROCAP',procap)
			
			def list = totalStd.stream().map({
			    def li = []
			    li<<it.工序编号
			    li<<it.工序类型
			    switch (it.工序类型){
			        case '通用':li<<it.通用工步表;break
			        case '铣削':li<<it.铣削工步表;break
			        case '车削':li<< it.车削工步表;break
			        default: throw new RuntimeException("找不到对应工序类型") ;break
			    }
			    li<<it.get('装夹件数（件）')
			    li<<it.get('人员操作时间（秒）')
			    li<<it.get('人工检测时间（秒）')
			    li<<it.get('其它时间（秒）')
			}).collect(Collectors.toList())
			
			list.each { gx ->
			    switch (gx[1]){
			        case '通用':
			            def collect = tyStd.stream().filter({ ty -> gx[2].split(",").contains(ty.Key) }).collect(Collectors.toList())
			            //赋值给主表加工时间TMMT index 12
			            def tmmt = collect.stream().mapToDouble({it.get('工进时间（秒）').toDouble() + it.get('辅助时间（秒）').toDouble()}).sum().toBigDecimal()
			            //赋值给主表工序时间TMOP index 13
			            def tmop = tmmt.add(gx[4].toBigDecimal()).add(gx[5].toBigDecimal()).add(gx[6].toBigDecimal())
			
			            totalItem.each {k,v ->
			                if(k == 'rows'){
			                    v.each {
			                        if(it[0] == gx[0]) {
			                            it[12] = tmmt
			                            it[13] = tmop
			                        }
			                    }
			                }
			            }
			            break
			        case '车削':
			            def collect = cxStd.stream().filter({ cx -> gx[2].split(",").contains(cx.Key) }).collect(Collectors.toList())
			            def tmmt = collect.stream().mapToDouble({ cx->
			                def tsRPMAVE = cx.get('切削速度（m/min）').toBigDecimal().multiply(BigDecimal.valueOf(2000)).divide(Math.PI,mc).divide(cx.get('最小车削直径（mm）').toBigDecimal().add(cx.get('最大车削直径（mm）').toBigDecimal()), mc)
			                def tsVF = cx.get('每转进给量（mm/rev）').toBigDecimal().multiply(tsRPMAVE)
			                def tsTMPOS = cx.get('单次定位时间（秒）').toBigDecimal().multiply(cx.get('切削次数（次）').toBigDecimal()).multiply(gx[3].toBigDecimal())
			                def tsTMENG = cx.get('切削长度（mm）').toBigDecimal().multiply(BigDecimal.valueOf(60)).multiply(cx.get('切削次数（次）').toBigDecimal()).multiply(gx[3].toBigDecimal()).divide(tsVF,mc)
			                return tsTMENG.add(tsTMPOS).add(cx.get('换刀时间（秒）').toBigDecimal()).add(cx.get('辅助时间（秒）').toBigDecimal()).toDouble()
			            }).sum()
			            def tmop = tmmt.add(gx[4].toBigDecimal()).add(gx[5].toBigDecimal()).add(gx[6].toBigDecimal())
			            totalItem.each {k,v ->
			                if(k == 'rows'){
			                    v.each{
			                        if(it[0] == gx[0]){
			                            it[12] = tmmt
			                            it[13] = tmop
			                        }
			                    }
			                }
			            }
			            break
			        case '铣削':
			            def collect = xxStd.stream().filter({ xx -> gx[2].split(",").contains(xx.Key) }).collect(Collectors.toList())
			            def tmmt = collect.stream().mapToDouble({ xx ->
			                def msRPM = xx.get('切削速度（m/min）').toBigDecimal().multiply(BigDecimal.valueOf(1000)).divide(Math.PI,mc).divide(xx.get('切削直径（mm）').toBigDecimal())
			                def msVF = xx.get('每齿进给量（mm/tooth）').toBigDecimal().multiply(xx.get('有效齿数&nbsp;').toBigDecimal()).multiply(msRPM)
			                def msTMPOS = xx.get('单次定位时间（秒）').toBigDecimal().multiply(xx.get('切削次数（次）').toBigDecimal()).multiply(gx[3].toBigDecimal())
			                def msTMENG = xx.get('切削长度（mm）').toBigDecimal().multiply(BigDecimal.valueOf(60)).multiply(xx.get('切削次数（次）').toBigDecimal()).multiply(gx[3].toBigDecimal()).divide(msVF, mc)
			                return msTMENG.add(xx.get('换刀时间（秒）').toBigDecimal()).add(msTMPOS).add(xx.get('辅助时间（秒）').toBigDecimal()).toDouble()
			            }).sum()
			            def tmop = tmmt.add(gx[4].toBigDecimal()).add(gx[5].toBigDecimal()).add(gx[6].toBigDecimal())
			            totalItem.each {k,v ->
			                if(k == 'rows'){
			                    v.each{
			                        if(it[0] == gx[0]){
			                            it[12] = tmmt
			                            it[13] = tmop
			                        }
			                    }
			                }
			            }
			            break
			        default:
			            throw new RuntimeException('没有对应到工序类型');break
			    }
			}
			
			execution.setVariable('header1566744708879',JsonOutput.toJson(totalItem))
    	]]>
    	</script>
    </scriptTask>
    <sequenceFlow id="flow2" sourceRef="scripttask1" targetRef="usertask1"></sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_craftway0902">
    <bpmndi:BPMNPlane bpmnElement="craftway0902" id="BPMNPlane_craftway0902">
      <bpmndi:BPMNShape bpmnElement="StartEvent_1" id="BPMNShape_StartEvent_1">
        <omgdc:Bounds height="36.0" width="36.0" x="150.0" y="160.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="EndEvent_0kt0bir" id="BPMNShape_EndEvent_0kt0bir">
        <omgdc:Bounds height="36.0" width="36.0" x="650.0" y="160.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="usertask1" id="BPMNShape_usertask1">
        <omgdc:Bounds height="55.0" width="105.0" x="460.0" y="150.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="scripttask1" id="BPMNShape_scripttask1">
        <omgdc:Bounds height="55.0" width="105.0" x="280.0" y="150.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="SequenceFlow_0ukfcms" id="BPMNEdge_SequenceFlow_0ukfcms">
        <omgdi:waypoint x="186.0" y="178.0"></omgdi:waypoint>
        <omgdi:waypoint x="280.0" y="177.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow1" id="BPMNEdge_flow1">
        <omgdi:waypoint x="565.0" y="177.0"></omgdi:waypoint>
        <omgdi:waypoint x="618.0" y="177.0"></omgdi:waypoint>
        <omgdi:waypoint x="618.0" y="96.0"></omgdi:waypoint>
        <omgdi:waypoint x="332.0" y="96.0"></omgdi:waypoint>
        <omgdi:waypoint x="332.0" y="150.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow2" id="BPMNEdge_flow2">
        <omgdi:waypoint x="385.0" y="177.0"></omgdi:waypoint>
        <omgdi:waypoint x="460.0" y="177.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>